(function(t){var i;void 0===i&&(i=function(){}),i.p=""}).call(this||window,window.__wpcc=window.__wpcc||{}),function(t){var i=function(t=-0,i=-0,n=-0){this.x=t,this.y=i,this.z=n},n=function(t,i,n){t.x=i.x+n.x,t.y=i.y+n.y,t.z=i.z+n.z},h=function(t,i,n){t.x=i.x-n.x,t.y=i.y-n.y,t.z=i.z-n.z},s=function(t,i,n){t.x=i.x*n,t.y=i.y*n,t.z=i.z*n},e=function(t){return t.x*t.x+t.y*t.y+t.z*t.z},o=function(t,i,n=1e-5){return t.u(i),t.normalize(n)},a=function(t,i){const n=t.x,h=t.y,s=t.z;t.x=h*i.z-s*i.y,t.y=s*i.x-n*i.z,t.z=n*i.y-h*i.x},r=function(t,i,n){const h=i.x,s=i.y;i=i.z;const e=n.x,o=n.y;n=n.z,t.x=s*n-i*o,t.y=i*e-h*n,t.z=h*o-s*e},l=function(t,i){const n=i.x-t.x,h=i.y-t.y;return n*n+h*h+(t=i.z-t.z)*t},u=function(t,i){return Math.sqrt(l(t,i))},g=function(t,i,n=1e-5){return Math.abs(t.x-i.x)<n&&Math.abs(t.y-i.y)<n&&Math.abs(t.z-i.z)<n},f=function(t=1e-5){return r(lh,pe,de),lh.X(t)},c=function(t=-0,i=-0,n=-0,h=1){this.x=t,this.y=i,this.z=n,this.w=h,this.normalize()},p=function(t,i,n){const h=i.x,s=i.y,e=i.z;i=i.w;const o=n.x,a=n.y,r=n.z;n=n.w,t.x=h*n+i*o+s*r-e*a,t.y=s*n+i*a+e*o-h*r,t.z=e*n+i*r+h*a-s*o,t.w=i*n-h*o-s*a-e*r},d=function(t,i,n=1e-5){return Math.abs(t.x-i.x)<n&&Math.abs(t.y-i.y)<n&&Math.abs(t.z-i.z)<n&&Math.abs(t.w-i.w)<n},y=function(){pc.markPhysics3dModuleAsUsed(),this.N=this.L=this.K=this.I=this.H=this.B=this.v=this.o=this.G=this.m=this.l=this.j=this.D=this.i=this.h=this.g=0},m=function(t){t.g=1,t.h=0,t.i=0,t.D=0,t.j=0,t.l=1,t.m=0,t.G=0,t.o=0,t.v=0,t.B=1,t.H=0,t.I=0,t.K=0,t.L=0,t.N=1},w=function(t,i){const n=i.x,h=i.y,s=i.z;i.x=t.g*n+t.h*h+t.i*s+t.D,i.y=t.j*n+t.l*h+t.m*s+t.G,i.z=t.o*n+t.v*h+t.B*s+t.H},x=function(t,i,n){n.x=t.g*i.x+t.h*i.y+t.i*i.z,n.y=t.j*i.x+t.l*i.y+t.m*i.z,n.z=t.o*i.x+t.v*i.y+t.B*i.z},b=function(t,i){const n=t.g,h=t.j,s=t.o,e=t.I,o=t.h,a=t.l,r=t.v,l=t.K,u=t.i,g=t.m,f=t.B,c=t.L,p=t.D,d=t.G,y=t.H,m=n*a-h*o,w=n*r-s*o,x=n*l-e*o,b=h*r-s*a,z=h*l-e*a,v=s*l-e*r,j=u*d-g*p,M=u*y-f*p,k=u*(t=t.N)-c*p,A=g*y-f*d,C=g*t-c*d,I=f*t-c*y;var P=m*I-w*C+x*A+b*k-z*M+v*j;P&&(P=1/P,i.g=(a*I-r*C+l*A)*P,i.j=(-h*I+s*C-e*A)*P,i.o=(d*v-y*z+t*b)*P,i.I=(-g*v+f*z-c*b)*P,i.h=(-o*I+r*k-l*M)*P,i.l=(n*I-s*k+e*M)*P,i.v=(-p*v+y*x-t*w)*P,i.K=(u*v-f*x+c*w)*P,i.i=(o*C-a*k+l*j)*P,i.m=(-n*C+h*k-e*j)*P,i.B=(p*z-d*x+t*m)*P,i.L=(-u*z+g*x-c*m)*P,i.D=(-o*A+a*M-r*j)*P,i.G=(n*A-h*M+s*j)*P,i.H=(-p*b+d*w-y*m)*P,i.N=(u*b-g*w+f*m)*P)},z=function(t,i,n){return t<i?i:t>n?n:t},v=function(){pc.markPhysics3dModuleAsUsed(),this.min=new i,this.max=new i},j=function(t,i,n){const h=i.min;i=i.max;const s=n.min;n=n.max,t.min.x=h.x<s.x?h.x:s.x,t.min.y=h.y<s.y?h.y:s.y,t.min.z=h.z<s.z?h.z:s.z,t.max.x=i.x>n.x?i.x:n.x,t.max.y=i.y>n.y?i.y:n.y,t.max.z=i.z>n.z?i.z:n.z},M=function(t){var i=Yr;t.min.add(i),t.max.add(i)},k=function(t,i){const n=t.min,h=i.min;return t=t.max,i=i.max,n.x<=i.x&&t.x>=h.x&&n.y<=i.y&&t.y>=h.y&&n.z<=i.z&&t.z>=h.z},A=function(t,i,n){return n<Number.EPSILON?k(t,i):Math.max(t.min.x-i.max.x,t.min.y-i.max.y,t.min.z-i.max.z,i.min.x-t.max.x,i.min.y-t.max.y,i.min.z-t.max.z)<n},C=function(t,i,n){let s=0;h(wh,n,i),n=wh.length(),wh.scale(1/n);var e=t.min.x,o=t.max.x;if(1e-5>Math.abs(wh.x)){if(i.x<e||i.x>o)return!1}else{var a=1/wh.x;if((e=(e-i.x)*a)>(o=(o-i.x)*a)&&(a=e,e=o,o=a),s=Math.max(s,e),s>(n=Math.min(n,o)))return!1}if(e=t.min.y,o=t.max.y,1e-5>Math.abs(wh.y)){if(i.y<e||i.y>o)return!1}else if(a=1/wh.y,(e=(e-i.y)*a)>(o=(o-i.y)*a)&&(a=e,e=o,o=a),s=Math.max(s,e),s>(n=Math.min(n,o)))return!1;if(e=t.min.z,o=t.max.z,1e-5>Math.abs(wh.z)){if(i.z<e||i.z>o)return!1}else if(t=1/wh.z,(e=(e-i.z)*t)>(i=(o-i.z)*t)&&(t=e,e=i,i=t),s=Math.max(s,e),s>(n=Math.min(n,i)))return!1;return!0},I=function(t,i,n){n.u(i),n.x=z(n.x,t.min.x,t.max.x),n.y=z(n.y,t.min.y,t.max.y),n.z=z(n.z,t.min.z,t.max.z)},P=function(t){pc.markPhysics3dModuleAsUsed(),this.ba=t,this.l=new v,this.M=!1},O=function(t=null){pc.markPhysics3dModuleAsUsed(),this.name=t?t.name:"",this.h=t?t.bounciness:0,this.i=t?t.dynamicFriction:0,this.l=t?t.staticFriction:0,this.j=t?t.frictionCombine:0,this.g=t?t.bounceCombine:0},N=function(t=-0,i=-0,n=-0,h=-0,s=-0,e=-0,o=-0,a=-0,r=-0){this.data=[-0,-0,-0,-0,-0,-0,-0,-0,-0],this.data[0]=t,this.data[1]=h,this.data[2]=o,this.data[3]=i,this.data[4]=s,this.data[5]=a,this.data[6]=n,this.data[7]=e,this.data[8]=r},B=function(t,i){var n=i.x+i.x,h=i.y+i.y;const s=i.z+i.z,e=i.x*n,o=i.x*h,a=i.x*s,r=i.y*h,l=i.y*s,u=i.z*s;n*=i.w,h*=i.w,i=i.w*s,t.data[0]=1-(r+u),t.data[1]=o+i,t.data[2]=a-h,t.data[3]=o-i,t.data[4]=1-(e+u),t.data[5]=l+n,t.data[6]=a+h,t.data[7]=l-n,t.data[8]=1-(e+r)},D=function(t,i){const n=i.x,h=i.y,s=i.z;i.x=t.data[0]*n+t.data[3]*h+t.data[6]*s,i.y=t.data[1]*n+t.data[4]*h+t.data[7]*s,i.z=t.data[2]*n+t.data[5]*h+t.data[8]*s},S=function(t,i){i.data[0]=t.data[0],i.data[1]=t.data[3],i.data[2]=t.data[6],i.data[3]=t.data[1],i.data[4]=t.data[4],i.data[5]=t.data[7],i.data[6]=t.data[2],i.data[7]=t.data[5],i.data[8]=t.data[8]},L=function(t,i,n){const h=i.data[0],s=i.data[3],e=i.data[6],o=i.data[1],a=i.data[4],r=i.data[7],l=i.data[2],u=i.data[5];i=i.data[8];const g=n.data[0],f=n.data[3],c=n.data[6],p=n.data[1],d=n.data[4],y=n.data[7],m=n.data[2],w=n.data[5];n=n.data[8],t.data[0]=g*h+p*s+m*e,t.data[1]=g*o+p*a+m*r,t.data[2]=g*l+p*u+m*i,t.data[3]=f*h+d*s+w*e,t.data[4]=f*o+d*a+w*r,t.data[5]=f*l+d*u+w*i,t.data[6]=c*h+y*s+n*e,t.data[7]=c*o+y*a+n*r,t.data[8]=c*l+y*u+n*i},E=function(t,i){for(let n=0;9>n;n++)t.data[n]*=i},F=function(t,i,n){var h=Ih;h.set(0,0,0,n),0===t?h.x=i:1===t?h.y=i:h.z=i},G=function(){this.g=new N,this.h=new i,this.i=0,this.j=this.l=null},H=function(t,i){i.X()||(bh.set(0,-t.h.z,t.h.y,t.h.z,0,-t.h.x,-t.h.y,t.h.x,0),n(vh,t.h,i),vh.X()?(L(zh,bh,bh),E(zh,t.i),t.g.add(zh)):(zh.set(0,-vh.z,vh.y,vh.z,0,-vh.x,-vh.y,vh.x,0),bh.multiply(bh),zh.multiply(zh),bh.U(zh),E(bh,t.i),t.g.add(bh)),t.h.add(i),J(t))},J=function(t){t.l=null,t.j=null},_=function(t){t.j=new c;for(let i=0;24>i;i++){B(Ch,t.j),S(Ch,Ah),Ah.multiply(t.g),Ah.multiply(Ch);var n=Math.abs(Ah.data[7]),h=Math.abs(Ah.data[6]),s=Math.abs(Ah.data[3]);if(s=(1+(h=(1+(n=n>h&&n>s?0:h>s?1:2))%3))%3,0===Ah.get(h,s)||Math.abs(Ah.get(h,h)-Ah.get(s,s))>2e6*Math.abs(2*Ah.get(h,s)))break;h=(Ah.get(h,h)-Ah.get(s,s))/(2*Ah.get(h,s)),1e3<(s=Math.abs(h))?F(n,1/(4*h),1):(s=1/(s+Math.sqrt(h*h+1)),s=1/Math.sqrt(s*s+1),F(n,Math.sqrt((1-s)/2)*Math.sign(h),Math.sqrt((1+s)/2))),t.j.multiply(Ih),t.j.normalize()}t.l=new i(Ah.get(0,0),Ah.get(1,1),Ah.get(2,2))},U=function(t){t.g.set(0,0,0,0,0,0,0,0,0),t.h.set(0,0,0),t.i=0,J(t)},K=function(t,i,n,h){P.call(this,i),this.h=t,this.g=n||null,this.Y=0,this._component=null,this.D=!1,this.M=h},T=function(t,n,h){this.g=t,this.j=new i(n.x,n.y,n.z),this.i=new c(h.x,h.y,h.z,h.w),this.i.normalize(),this.transform=new y,this.l=new y,this.h=new v,R(this)},R=function(t){t.transform.ua(t.i,t.j),b(t.transform,t.l),t.h.transform(t.g.l,t.transform)},V=function(t,i,n){return n.s(i)-t.s(i)},q=function(t,i,n,e){return h($h,n,t),t=$h.s(i),s(e,i,-t),e.add(n),t},W=function(t,i,n,s){h(Jh,i,t),_h.u(Jh),1e-5>_h.normalize()?s.u(t):(h(Uh,n,t),s.u(_h),s.scale(Uh.s(_h)),i=Jh.s(s)/Jh.s(Jh),i=z(i,0,1),s.u(Jh),s.scale(i),s.add(t))},X=function(t,i,n,s,e){h(Ph,n,i),h(Oh,s,i),h(Nh,t,i);var o=Ph.s(Nh),a=Oh.s(Nh);if(0>=o&&0>=a)e.u(i);else{h(Nh,t,n);var r=Ph.s(Nh),l=Oh.s(Nh);if(0<=r&&l<=r)e.u(n);else{var u=o*l-r*a;if(0>=u&&0<=o&&0>=r)u=o/(o-r),e.set(i.x+Ph.x*u,i.y+Ph.y*u,i.z+Ph.z*u);else{h(Nh,t,s),t=Ph.s(Nh);var g=Oh.s(Nh);0<=g&&t<=g?e.u(s):0>=(o=t*a-o*g)&&0<=a&&0>=g?(u=a/(a-g),e.set(i.x+Oh.x*u,i.y+Oh.y*u,i.z+Oh.z*u)):0>=(a=r*g-t*l)&&0<=l-r&&0<=t-g?(i=(l-r)/(l-r+(t-g)),e.set(n.x+(s.x-n.x)*i,n.y+(s.y-n.y)*i,n.z+(s.z-n.z)*i)):(s=o/(n=a+o+u),u/=n,e.set(Ph.x*s+i.x+Oh.x*u,Ph.y*s+i.y+Oh.y*u,Ph.z*s+i.z+Oh.z*u))}}}},Y=function(t,i,n,e,o,a){h(Wh,i,t),h(Xh,e,n),h(Yh,t,n),i=Wh.s(Wh);var r=Xh.s(Xh);const l=Xh.s(Yh);if(1e-5>=i&&1e-5>=r)return o.u(t),a.u(n),h(Zh,o,a),Zh.s(Zh);if(1e-5>=i){var u=0;r=z(l/r,0,1)}else if(e=Wh.s(Yh),1e-5>=r)r=0,u=z(-e/i,0,1);else{const t=Wh.s(Xh);0>(r=(t*(u=0!=(u=i*r-t*t)?z((t*l-e*r)/u,0,1):0)+l)/r)?(r=0,u=z(-e/i,0,1)):1<r&&(r=1,u=z((t-e)/i,0,1))}return s(o,Wh,u),o.add(t),s(a,Xh,r),a.add(n),h(Zh,o,a),Zh.s(Zh)},Z=function(t,i,n,s,e){h(Sh,n,i),h(Lh,s,i),h(Eh,t,i),t=Sh.s(Sh),i=Sh.s(Lh),n=Lh.s(Lh),s=Eh.s(Sh);const o=Eh.s(Lh),a=Eh.s(Eh),r=t*n-i*i;1e-5>Math.abs(r)?1e-5>Math.abs(t)?(t=Math.sqrt(a/n),e.set(1-t,0,t)):(t=Math.sqrt(a/t),e.set(1-t,t,0)):(e.y=(n*s-i*o)/r,e.z=(t*o-i*s)/r,e.x=1-e.y-e.z)},$=function(t,i){var n=ao,h=ho,e=so,o=t.s(n);return t=h.s(n)-o,o=e.s(n)-o,-1e-5>t&&-1e-5>o?t>o?(i.u(h),t):(i.u(e),o):1e-5<t&&1e-5<o?t<o?(i.u(h),t):(i.u(e),o):(s(i,n,-o),i.add(e),0)},Q=function(t,i,n,e,o=1e-5){var a=De;return h(Qh,n,i),n=a.s(Qh),!(Math.abs(n)<o||(h(ts,i,t),0>(t=-a.s(ts)/n)||1<t||(s(e,Qh,t),e.add(i),0)))},tt=function(t,i,n,o,a){return h(is,i,t),h(ns,o,n),h(hs,n,t),r(ss,hs,ns),r(os,is,ns),!(1e-5>(n=e(os))||0>(i=ss.s(os)/n)||1<i||(r(es,hs,is),0>(n=es.s(os)/n)||1<n||(s(a,is,i),a.add(t),0)))},it=function(t,n,s,e){P.call(this,32),this.a=t,this.b=n,this.c=s,this.g=e,this.A=new i,h(as,this.b,this.a),h(rs,this.c,this.a),r(this.A,as,rs),this.A.normalize(),(t=this.l).min.x=Math.min(this.a.x,this.b.x,this.c.x),t.min.y=Math.min(this.a.y,this.b.y,this.c.y),t.min.z=Math.min(this.a.z,this.b.z,this.c.z),t.max.x=Math.max(this.a.x,this.b.x,this.c.x),t.max.y=Math.max(this.a.y,this.b.y,this.c.y),t.max.z=Math.max(this.a.z,this.b.z,this.c.z)},nt=function(){pc.markPhysics3dModuleAsUsed(),this.j=this.h=null,this.C=new i,this.g=0,this.A=new i,this.ia=new i,this.l=0},ht=function(t){if(0!==t.length){var i=t.buffer[t.length-1];return t.length--,i}},st=function(t,i){t.buffer[i]=t.buffer[t.length-1],t.length--},et=function(t,i){-1!==(i=t.indexOf(i))&&st(t,i)},ot=function(t,i){t.fa.u(i.fa),t.ga.u(i.ga),t.C.u(i.C)},at=function(t,i,n,o){if(h(bs,t.position,i.position),bs.X())return!1;bs.normalize(),js.wa(t,i,bs),bs.scale(-1),Ms.wa(t,i,bs);let a=ys;a.J(js,Ms),zs.set(1/0,1/0,1/0);let r=0;for(;15>r;){if(a.xa(vs),vs.X())return!1;if(a=a.qa(vs),e(vs)>e(zs))return a.$(zs,n,o),!0;if(zs.u(vs),s(bs,zs,-1),bs.normalize(),ks.wa(t,i,bs),zs.s(bs)+1e-4>=ks.C.s(bs))return a.$(zs,n,o),!0;a=a.ja(ks),r++}return a.xa(vs),a.qa(vs).$(zs,n,o),!0},rt=function(t,i,n){this.buffer=t,this.g=i,this.h=n},lt=function(t){this.g=new v,this.l=this.j=null,this.o=0,this.h=t||null,this.i=null,this.m=0},ut=function(t){t.h?t.g.u(t.h.l):j(t.g,t.j.g,t.l.g)},gt=function(t,i){if(i===t)return 1/0;j(Os,t.g,i.g),i=(t=Os).max.y-t.min.y;const n=t.max.z-t.min.z;return(t.max.x-t.min.x)*(i+n)+i*n},ft=function(t,i){const n=i.h-i.g;if(!(1>=n)){var h=i.get(0);for(t.i=h,t.m=gt(t,h),h=1;h<n;h++){const n=i.get(h),s=gt(t,n);t.m>s&&(t.i=n,t.m=s)}}},ct=function(t){return 153391689&((t=51130563&((t=50393103&((t=4278190335&(t^t<<16))^t<<8))^t<<4))^t<<2)},pt=function(t,i){return t.o-i.o},dt=function(t){return Math.round(Math.max(Math.pow(t,.5)/2*Math.pow(t,.5),1))},yt=function(t,i){var n=t.h-t.g;if(0!==n)if(4>n)mt(t,dt(4));else{if(0<i){var h=0,s=t.h-t.g;do{var e=Math.round((h+s)/2);0<(t.get(e).o&i)?s=e:h=e}while(1<s-h);h=s}else h=Math.ceil(n/2);for(e=t.g,s=t.g+h,t.g=e,t.h=s,n=new rt(t.buffer,t.g+h,t.g+n),yt(t,i>>>=1),yt(n,i),i=n.g;i<n.h;)t.buffer[t.h]=t.buffer[i],t.h++,i++;mt(t,dt(t.h-t.g))}},mt=function(t,i){let n=t.h-t.g;if(!(n<=i)){for(var h=0;h<n;h++)ft(t.get(h),t);for(;n>i;){h=t.get(0);for(var s=0,e=1;e<n;e++){var o=t.get(e);h.m>o.m&&(h=o,s=e)}e=h,o=h.i;const a=new lt;if(a.j=e,a.l=o,ut(a),e=a,t.buffer[t.g+s]=e,-1===(s=(o=t).indexOf(h.i)))throw Error("Element not found");if(o.buffer[o.g+s]=o.buffer[o.h-1],o.h--,n--,n<=i)break;for(ft(e,t),s=0;s<n;s++)(e=t.get(s)).i!==h&&e.i!==h.i||ft(e,t)}}},wt=function(t){for(var i=[],n=new v,h=0;h<t.length;h++){j(n,n,t[h].l);var s=new lt(t[h]);ut(s),i.push(s)}t=512/(n.max.x-n.min.x),h=512/(n.max.y-n.min.y),s=512/(n.max.z-n.min.z);for(let e=0;e<i.length;e++){const o=i[e];o.o=(ct(((o.g.max.z-o.g.min.z)/2+o.g.min.z+n.min.z)*s)<<2)+(ct(((o.g.max.y-o.g.min.y)/2+o.g.min.y+n.min.y)*h)<<1)+ct(((o.g.max.x-o.g.min.x)/2+o.g.min.x+n.min.x)*t)}i.sort(pt),n=new rt(i,0,i.length),2>=i.length?i=0:(i=i[i.length-1].o,i|=i>>1,i|=i>>2,i|=i>>4,i|=i>>8,i|=i>>16,i-=i>>>1),yt(n,i),mt(n,1),this.g=n.get(0)},xt=function(t,i,n,h,s){for(K.call(this,t,8,h,s),this.i=i,this.o=n,this.m=this.j=null,(t=this.l).min.x=t.min.y=t.min.z=0,t.max.x=t.max.y=t.max.z=0,i=0;i<this.i.length;i++)t.min.x=Math.min(t.min.x,this.i[i].x),t.min.y=Math.min(t.min.y,this.i[i].y),t.min.z=Math.min(t.min.z,this.i[i].z),t.max.x=Math.max(t.max.x,this.i[i].x),t.max.y=Math.max(t.max.y,this.i[i].y),t.max.z=Math.max(t.max.z,this.i[i].z)},bt=function(t){if(t.j)return t.j;t.j=[];const i=t.i,n=t.o,h=t.j;for(let t=0;t<n.length;t+=3)h.push(new it(i[n[t]],i[n[t+1]],i[n[t+2]],t/3|0));return t.j},zt=function(t){return t.m||(t.m=new wt(bt(t)).g),t.m},vt=function(t,i,h){n(Bs,i,t.D),t.sa(Bs),Mt(t,h,Ds),Ds.multiply(t.o),In(t,Ds)},jt=function(t){if(t.K!==Dr||!(1&t.g)||512&t.g)return!1;let i=!0;for(let n=0;n<t.h.g.length;n++){const h=t.h.g[n].g;if(8===h.ba)return!1;i=i&&h.M}return!i},Mt=function(t,i,n){t.da().F(t.v,Ns),Ns.add(t.j),.001>(t=Ns.length())?Ns.scale(.5*i-i*i*i*.020833333333*t*t):Ns.scale(Math.sin(.5*t*i)/t),n.x=Ns.x,n.y=Ns.y,n.z=Ns.z,n.w=Math.cos(t*i*.5)},kt=function(t,i,n,e=!1){let a=n;s(Ss,t.B,t.aa),Ss.add(t.l),Ss.scale(n),o(Ls,Ss),Ls.scale(1e-4);const r=Fn(t);Fs.clear(),Gs.clear(),Hs.clear();for(var l=0;l<i.length;l++){var g=i[l],f=Fs;if(8===g.h.ba)for(var c=bt(g.h),p=0;p<c.length;p++){var d=c[p];Hs.buffer.length===Hs.length?Hs.add(new Xs):Hs.length++;var y=Hs.buffer[Hs.length-1];y.J(d,g),f.add(y)}else Gs.buffer.length===Gs.length?Gs.add(new Ws):Gs.length++,(c=Gs.buffer[Gs.length-1]).J(g),f.add(c)}for(i=Pn(t,n),l=0;l<Fs.length;l++)Fs.buffer[l].o(i)||(st(Fs,l),l--);for(;1e-5<a;){t:{for(i=a,l=e,e=Fs,g=Ss,_s.clear(),Js.u(g),g=Js.normalize(),f=0;f<e.length;f++){for((p=c=e.buffer[f]).i=1/0,p.l=1/0,d=0;d<r.length;d++){if(!p.m(r.buffer[d],Rs,Vs)){p.i=0,p.l=0;break}(y=u(Vs,Rs))<p.i&&(p.i=y),h(qs,Vs,Rs),(y=qs.s(Js))<p.l&&(p.l=y)}if(c.j=c.i/g*i,(p=0===c.j)&&!l){e=c;break t}c.i>=g?(st(e,f),f--):p&&l&&_s.add(c.g.id)}if(0<_s.length)for(i=0;i<e.length;i++)-1!==_s.indexOf(e.buffer[i].g.id)&&(st(e,i),i--);for(i=null,l=0;l<e.length;l++)g=e.buffer[l],(null===i||g.j<i.j)&&(i=g);e=i}if(!(i=e)){vt(t,Ss,a);break}if(0===(e=i.j))return a!==n&&(t.g|=32),i.g;if(e>=a){vt(t,Ss,a);break}for(Es.u(Ss),Es.scale(e/a),Es.add(Ls),vt(t,Es,e),Ss.U(Es),i=0;i<r.length;i++)Kn(r.buffer[i]);a-=e,e=!1}return null},At=function(t,i){Us.clear(),Ks.clear();for(var n=0;n<t.length;n++){var h=t[n],s=jt(h);!s||32&h.g?s?(Nn(h,i),En(h)):s||Ks.add(h):Us.add(h)}if(0!==Us.length)for(t=0;t<Us.length;t++){n=Us.buffer[t],Nn(n,i),n.B.set(0,0,0),n.v.set(0,0,0),h=Pn(n,i),s=[];for(let t=0;t<Ks.length;t++){var e=Ks.buffer[t];if(k(h,Mn(e))){e=Fn(e);for(let t=0;t<e.length;t++){const i=e.buffer[t];!i.h.M&&k(h,i.m)&&s.push(i)}}}0===s.length?On(n,i):(kt(n,s,i,!0),n.g&=-33,En(n))}},Ct=function(t,i){return t.buffer[0]-i.buffer[0]},It=function(t){var i=Zs;const n=t.min;return t=t.max,Math.min(n.x*i.x,t.x*i.x)+Math.min(n.y*i.y,t.y*i.y)+Math.min(n.z*i.z,t.z*i.z)},Pt=function(t){var i=Zs;const n=t.min;return t=t.max,Math.max(n.x*i.x,t.x*i.x)+Math.max(n.y*i.y,t.y*i.y)+Math.max(n.z*i.z,t.z*i.z)},Ot=function(){this.buffer=[-0,-0,-0,-0,-0,-0],this.h=this.g=this.i=!1,this.body=null},Nt=function(){this.h=[],this.g=[],this.i=new ds,this.j=new ds},Bt=function(t,i,n){const h=[];for(let s=0;s<t.h.length;s++){const e=t.h[s];k(i,Mn(e))&&0!=(e.h.j&n)&&h.push(e)}return h},Dt=function(){this.m=0,this.j=this.i=null,this.g=[],this.h=new ds,this.l=0},St=function(t,i){t.g[i].G(),t.g[i]=t.g[t.g.length-1],t.g.pop()},Lt=function(t){for(;t.h.length;)ht(t.h).G();for(;t.g.length;)t.g.pop().G()},Et=function(t,i,n,s){let o=0;return h(ie,t.h,i.h),h(ne,n.h,s.h),a(ie,ne),o=Math.max(o,e(ie)),h(ie,t.h,n.h),h(ne,i.h,s.h),a(ie,ne),o=Math.max(o,e(ie)),h(ie,t.h,s.h),h(ne,i.h,n.h),a(ie,ne),Math.max(o,e(ie))},Ft=function(t,i,n,h){return Math.max(l(t.j,i.j),l(t.j,n.j),l(t.j,h.j),l(i.j,n.j),l(i.j,h.j),l(n.j,h.j))},Gt=function(t,i){if(1===t.i.h.g.length&&1===t.j.h.g.length)if(0===t.h.length){var n=Yn(i);i.m||n.S.add(i),Xn(n),n.B|=sl,t.h.add(n)}else(t=t.h.buffer[0]).m=i.m,t.B&ol&&(t.B&=~ol,t.B|=el),i.m||t.S.add(i);else{n=!1;for(let h=t.h.length-1;0<=h;h--){const s=t.h.buffer[h];if(s.K===i.K&&s.I===i.I||s.I===i.K&&s.K===i.I){n=!0,s.m=i.m,s.B&ol&&(s.B&=~ol,s.B|=el),i.m||s.S.add(i);break}}n||(n=Yn(i),i.m||n.S.add(i),Xn(n),n.B|=sl,t.h.add(n))}},Ht=function(){this.g=[],this.h=0,this.cache=new Map},Jt=function(t,i){const n=t.g[i];t.g[i]=t.g[t.h-1],t.h--,t.cache.delete(n.m),Lt(n),pl(cl.Ea,n)},_t=function(t,i){return Math.min(t.id,i.id)+(Math.max(t.id,i.id)<<16)},Ut=function(){this.g=[-0,-0,-0,-0,-0,-0,-0,-0,-0,-0],this.h=[-0,-0,-0,-0,-0,-0]},Kt=function(t,i,n,h){const s=i+n,e=i*i,o=e+n*s;t.h[0]=s+h,t.h[1]=o+h*t.h[0],t.h[2]=i*e+n*o+h*t.h[1],t.h[3]=t.h[1]+i*(t.h[0]+i),t.h[4]=t.h[1]+n*(t.h[0]+n),t.h[5]=t.h[1]+h*(t.h[0]+h)},Tt=function(t,i,n,h,s){K.call(this,t,4,n,s),this.I=h,this.m=i,this.H=this.G=this.o=this.i=this.v=this.j=null,Qt(this.l,this.m),this.B=null},Rt=function(t){return t.j||Yt(t),t.j},Vt=function(t){return t.i||Yt(t),t.i},qt=function(t){return t.o||Yt(t),t.o},Wt=function(t){return t.G||Yt(t),t.o},Xt=function(t){return t.H||Yt(t),t.H},Yt=function(t){t.fb(),t.ib(),t.hb(),t.gb();var i,n=console,h=n.assert;t:{for(i=0;i<t.i.length;i++)for(var s=t.i[i],e=0;e<t.j.length;e++)if(1e-10<fi(s,t.j[e].position)){i=!1;break t}i=!0}h.call(n,i),n=t.j[0],h=t.j[0],i=t.j[0],s=t.j[0],e=t.j[0];let o=t.j[0];for(let a=1;a<t.j.length;a++){const r=t.j[a];r.position.x>n.position.x?n=r:r.position.x<h.position.x&&(h=r),r.position.y>i.position.y?i=r:r.position.y<s.position.y&&(s=r),r.position.z>e.position.z?e=r:r.position.z<o.position.z&&(o=r)}for(t.H=[n,h,i,s,e,o],n=0;n<t.i.length;n++)(h=t.i[n]).j=null,h.i=[]},Zt=function(t,i){const n=(t=$t(t,i)).position.s(i);let h=t.g[0],s=1/0;for(let o=0;o<t.g.length;o++){const a=t.g[o];var e=(a.i.g===t?a.g:a.i.g).position.s(i);(e=Math.abs(n-e))<s&&(s=e,h=a)}return h},$t=function(t,i){var n=Xt(t);let h=(t=n[0]).position.s(i);for(var s=1;s<n.length;s++){var e=n[s],o=e.position.s(i);o>h&&(t=e,h=o)}do{for(n=!1,s=t,e=0;e<s.g.length;e++){const a=(o=s.g[e].g).position.s(i);a>h&&(h=a,t=o,n=!0)}}while(n);return t},Qt=function(t,i){t.min.x=t.min.y=t.min.z=1/0,t.max.x=t.max.y=t.max.z=-1/0;for(let n=0;n<i.length;n++)t.min.x=Math.min(t.min.x,i[n].x),t.min.y=Math.min(t.min.y,i[n].y),t.min.z=Math.min(t.min.z,i[n].z),t.max.x=Math.max(t.max.x,i[n].x),t.max.y=Math.max(t.max.y,i[n].y),t.max.z=Math.max(t.max.z,i[n].z)},ti=function(t){if(t.I)return null;if(!t.B){t.B=new Ut;var i=t.B,n=Vt(t);for(let t=0;t<n.length;t++){const l=n[t],u=l.g;let g=u.h;do{var s=u.i.g.position,e=g.g.position,o=g.i.g.position;if(h(ee,e,s),h(oe,o,s),r(ae,ee,oe),0>ae.s(l.A)){ae.scale(-1);var a=e;e=o,o=a}a=s.x;const t=e.x,n=o.x,f=s.y,c=e.y,p=o.y;s=s.z,e=e.z,o=o.z;const d=ae.x,y=ae.y,m=ae.z;Kt(i,a,t,n),i.g[0]+=d*i.h[0],i.g[1]+=d*i.h[1],i.g[4]+=d*i.h[2],i.g[7]+=d*(f*i.h[3]+c*i.h[4]+p*i.h[5]),Kt(i,f,c,p),i.g[2]+=y*i.h[1],i.g[5]+=y*i.h[2],i.g[8]+=y*(s*i.h[3]+e*i.h[4]+o*i.h[5]),Kt(i,s,e,o),i.g[3]+=m*i.h[1],i.g[6]+=m*i.h[2],i.g[9]+=m*(a*i.h[3]+t*i.h[4]+n*i.h[5]),g=g.h}while(g.h!==u)}for(n=0;10>n;n++)i.g[n]*=se[n]}return t.B},ii=function(t){const i=[];for(let n=0;n<t.i.length;n++){const h=t.i[n];if(h.l!==ye){t.i[n]=t.i[t.i.length-1],t.i.pop(),n--;for(let t=0;t<h.i.length;t++)i.push(h.i[t])}}return i},ni=function(t,i){var n=t.g;do{var h;if((h=fi(n.j,n.i.j.h)>-Number.EPSILON)&&(h=n.i,h=fi(h.j,h.i.j.h)>-Number.EPSILON),h&&n.j.A.s(n.i.j.A)>1-Number.EPSILON&&-1===i.indexOf(n.i.j)){var s=n.i.j;s.l=me;var e=n.i;i=n.l,h=n.h;let o=e.l;e=e.h;let a=i;for(;i.i.j===s;)if(i=i.l,e=e.h,i===a)throw Error("Degenerated face");for(a=h;h.i.j===s;)if(o=o.l,(h=h.h)===a)throw Error("Degenerated face");for(s=e;s!==o.h;s=s.h)s.j=t;return t.g===n&&(t.g=h),o.h=h,h.l=o,i.h=e,e.l=i,ci(t),!0}n=n.h}while(n!==t.g);return!1},hi=function(t){let i=null,n=-1/0;for(let h=0;h<t.i.length;h++){const s=t.i[h],e=s.m;null!==s.j&&e>n&&(n=e,i=s)}return i},si=function(t,i,n,h,s){h.l=me,h=null===n?n=h.g:n.h;do{const n=h.i.j;n.l===ye&&(1e-10<fi(n,i)?si(t,i,h.i,n,s):s.push(h)),h=h.h}while(n!==h)},ei=function(t,i,n){const h=new gi,s=new li;return s.g=t,s.j=h,(t=new li).g=i,t.j=h,(i=new li).g=n,i.j=h,s.l=i,s.h=t,t.l=s,t.h=i,i.l=t,i.h=s,h.g=s,ci(h),h},oi=function(t,i){let n=1e-10,h=null;for(let s=0;s<i.length;s++){const e=i[s],o=fi(e,t.position);o>n&&(n=o,h=e)}h&&(h.i.push(t),null===h.j||h.m<n)&&(h.j=t,h.m=n)},ai=function(t,i){for(let n=0;n<t.length;n++)if(Math.abs(t[n].s(i))>1-Number.EPSILON)return!0;return!1},ri=function(t){this.position=t,this.g=[]},li=function(){this.j=this.g=this.i=this.l=this.h=null},ui=function(t,i){t.i=i,i.i=t},gi=function(){this.g=null,this.A=new i,this.h=new i,this.o=0,this.i=[],this.j=null,this.m=0,this.l=ye},fi=function(t,i){return t.A.s(i)-t.o},ci=function(t){const i=t.g;t.A.set(0,0,0),t.h.u(i.g.position),h(pe,i.g.position,i.h.g.position);let n=i.h,s=1;for(;i!==n;){if(t.h.add(n.g.position),t.A.X()&&(h(de,n.g.position,n.h.g.position),!f(Number.EPSILON))){r(t.A,de,pe);var e=t.A;e.normalize(Number.EPSILON),e.normalize(Number.EPSILON)}s++,n=n.h}t.h.scale(1/s),t.o=t.A.s(t.h)},pi=function(t,i){for(t=t.g;0<i;)t=t.h,i--;return t},di=function(t,i,n,h){let s=i,e=t;return t<i&&(s=t,e=i),t=h,i=n,n<h&&(t=n,i=h),e>t?i-s:0},yi=function(t,i,n,h,e,o=0){let a=n[0],r=1/0;for(let l=0;l<h;l++){const h=n[l];t.g(h,we),i.g(h,xe);const u=di(we[1],we[0],xe[1],xe[0]);if(u<=-o+Number.EPSILON)return e.u(h),0;const g=di(-we[0],-we[1],-xe[0],-xe[1]);if(g<=-o+Number.EPSILON)return s(e,h,-1),0;u<r&&(r=u,a=h),g<r&&(r=g,s(e,h,-1),a=e)}return e.u(a),r},mi=function(){this.i=[],this.j=0},wi=function(){this.i=null},xi=function(t,i){return t.i.T(i,ze),ze.s(i)},bi=function(){this.i=null,this.l=new y,this.j=new y},zi=function(t,i){return x(t.l,i,je),t.i.T(je,ve),w(t.j,ve),ve.s(i)},vi=function(){this.i=0,this.l=cl.La,this.j=null,this.g=new i,this.A=new i,this.h=0},ji=function(){this.i=1,this.l=cl.Ka,this.j=null,this.o=new i,this.m=new i,this.g=new i,this.A=new i,this.h=0},Mi=function(){this.i=2,this.l=cl.Ma,this.j=null,this.g=new i,this.A=new i,this.h=0},ki=function(t,i,n,h){Z(i,t.a,t.b,t.c,ke);const s=1e-5<Math.abs(ke.x);var e=1e-5<Math.abs(ke.y),o=1e-5<Math.abs(ke.z),a=s?e||o:e&&o;return s&&e&&o?((e=th(cl.La)).J(t,i,n,h),e):a?(o=t.a,a=t.b,s?e||(a=t.c):o=t.c,(e=th(cl.Ka)).J(t,o,a,i,n,h),e):(i=t.a,e?i=t.b:o&&(i=t.c),(e=th(cl.Ma)).J(t,i,n,h),e)},Ai=function(t,i){if(.99999<Math.abs(t.A.s(i.A)))return null;var n=t.a.s(t.A),h=i.a.s(t.A)-n,e=i.b.s(t.A)-n;if(n=i.c.s(t.A)-n,0<h&&0<e&&0<n||0>h&&0>e&&0>n)return null;s(Ae,t.A,-h),Ae.add(i.a),s(Ce,t.A,-e),Ce.add(i.b),s(Ie,t.A,-n),Ie.add(i.c);var o=u(Ae,Ce),a=u(Ce,Ie),r=u(Ie,Ae);const l=[];return o>a&&o>r?l.push(Ae,Ce):a>o&&a>r?l.push(Ce,Ie):l.push(Ie,Ae),Ei(t,l[0],l[1],Pe[0],Pe[1],0)&&Ei(i,Pe[0],Pe[1],Oe[0],Oe[1],0)?(r=i.a.s(i.A),a=t.a.s(i.A)-r,o=t.b.s(i.A)-r,r=t.c.s(i.A)-r,h=Math.abs(Math.min(h,e,n)),e=a,Math.abs(e)>Math.abs(o)&&(e=o),Math.abs(e)>Math.abs(r)&&(e=r),h-1e-5<(n=Math.abs(e))?(s(Ne,t.A,-1),[ki(t,Oe[0],Ne,h),ki(t,Oe[1],Ne,h)]):(s(Ne,i.A,-Math.sign(e)),[ki(t,Oe[0],Ne,n),ki(t,Oe[1],Ne,n)])):null},Ci=function(t,n,h,s){s.Na||(s.Na=new Map),s.Va||(s.Va=new Map),s.ka||(s.ka=new y,s.ka.u(t.i),s.ka.multiply(h.transform)),t=[];const e=[];h=zt(h.h);do{var o=s.Na.get(h);if(o||((o=new v).u(h.g),o.transform(o,s.ka),s.Na.set(h,o)),k(o,n.l))if(h.h){if((o=s.Va.get(h))||(o={a:new i,b:new i,c:new i,A:new i},s.ka.F(h.h.a,o.a),s.ka.F(h.h.b,o.b),s.ka.F(h.h.c,o.c),x(s.ka,h.h.A,o.A),s.Va.set(h,o)),h=Ai(n,o))for(o=0;o<h.length;o++)t.push(h[o]);h=e.pop()}else e.push(h.j),h=h.l;else h=e.pop()}while(h);return t},Ii=function(t,i,n,h){switch(Math.max(t,i)){case 1:return n*h;case 2:return Math.min(n,h);case 3:return Math.max(n,h);default:return(n+h)/2}},Pi=function(t,n){for(;t.length<n;)t.push(new i)},Oi=function(t,n,s,e,o){let a=Se;a.clear();for(var l=0;l<n;l++)a.add(t[l]);for(t=0;t<e;t++){n=s[t],h(Be,t===e-1?s[0]:s[t+1],n),r(De,Be,o),De.normalize(),l=De.s(n);const g=a===Se?Le:Se;g.clear();for(let t=0;t<a.length;t++){const h=a.buffer[t],s=t===a.length-1?a.buffer[0]:a.buffer[t+1];var u=De.s(h)-l;const e=De.s(s)-l;let o=!0;if(0<=u&&0<=e?g.add(s):0<=u&&0>e?(u=new i,o=Q(n,h,s,u,Number.EPSILON),g.add(u)):0>u&&0<=e&&(u=new i,o=Q(n,h,s,u,Number.EPSILON),g.add(u),g.add(s)),!o)return[]}a=g}for(s=[],e=0;e<a.length;e++)s.push(a.buffer[e]);return s},Ni=function(t,i){const n=qt(t.h);Pi(i,n.length),t=t.o;for(let h=0;h<n.length;h++)t.F(n[h],i[h]);return i},Bi=function(t,i){const n=Rt(t.h);Pi(i,n.length);for(let h=0;h<n.length;h++)t.transform.F(n[h].position,i[h]);return i},Di=function(t,i){let n=(i=Vt(i.h))[0],h=1/0;for(let s=0;s<i.length;s++){const e=i[s],o=l(e.A,t);o<h&&(n=e,h=o)}return n},Si=function(t,i){let n=(i=Vt(i.h))[0].A.s(t),h=i[0];for(let s=1;s<i.length;s++){const e=i[s].A.s(t);e<n&&(n=e,h=i[s])}return h},Li=function(t,i){if(48>Rt(t.h).length){const n=th(cl.ma);return n.J(t,Bi(t,i),Rt(t.h).length),n}return(i=th(cl.ca)).J(t),i},Ei=function(t,i,n,e,o,a){return s(Ee,t.A,a),h(e,i,Ee),h(o,n,Ee),!!(Fi(t,t.a,t.b,e,o)&&Fi(t,t.b,t.c,e,o)&&Fi(t,t.c,t.a,e,o))&&(e.add(Ee),o.add(Ee),!0)},Fi=function(t,i,n,s,e){h(Fe,n,i),a(Fe,t.A),Fe.normalize();var o=i.s(Fe);return t=s.s(Fe)-o,o=e.s(Fe)-o,!(0<t&&0<o||(0>=t&&0>=o||tt(i,n,s,e,0<t&&0>o?s:e),0))},Gi=function(t,i,n,h,s){K.call(this,t,1,h,s),this.i=Math.max(i,1e-4),this.j=Math.max(Math.abs(n),1e-4),(t=this.l).min.x=t.min.z=-this.i,t.min.y=-this.j-this.i,t.max.x=t.max.z=this.i,t.max.y=this.j+this.i},Hi=function(t,i,n,h){K.call(this,t,16,n,h),this.i=Math.max(i,1e-4),(t=this.l).min.x=t.min.y=t.min.z=-this.i,t.max.x=t.max.y=t.max.z=this.i},Ji=function(t,i,h){const e=t.v.h;s(t.h,t.i,t.o.h.i),t.h.add(i),s(t.g,t.i,-e.i),t.g.add(h),n(t.j,t.h,t.g),t.j.scale(.5),w(t.o.i,t.h),w(t.v.i,t.g)},_i=function(t,i,h){s(t.h,t.i,t.o.h.i),t.h.add(i),t.g.u(h),n(t.j,t.h,t.g),t.j.scale(.5),w(t.o.i,t.h),w(t.v.i,t.g)},Ui=function(t,i,n,e,o){e.u(t),o.u(i),t=q(n.g.g.position,n.A,t,go),q(n.g.g.position,n.A,i,fo),i=n.g;let a=!0,l=!0,u=0;do{var g=i.i.g.position;const c=i.g.position;h(co,c,g),r(po,n.A,co),po.normalize();var f=g.s(po);const p=go.s(po)-f;if(1e-5<p&&(a=!1),1e-5<(f=fo.s(po)-f)&&(l=!1),Math.sign(p)===Math.sign(f))i=i.h;else if(tt(g,c,go,fo,yo)){if(u++,s(g=0<p?e:o,n.A,t),g.add(yo),2===u)return!0;i=i.h}else i=i.h}while(i!==n.g);return 0!==u||a&&l},Ki=function(t,n,h){t.l.g&n.l.g&65536&&(t=t.h.h+(n.h.h<<16),(n=Xo.get(t))||(n=new i,Xo.set(t,n)),n.u(h))},Ti=function(t,i,n,h,s,e){na.clear();const o=Wt(t.h),a=Wt(i.h);t=t.o,i=i.o,Pi(Qo,o.length);for(var l=0;l<o.length;l++)t.F(o[l],Qo[l]);for(Pi(ta,a.length),t=0;t<a.length;t++)i.F(a[t],ta[t]);for(Pi(ia,o.length*a.length),t=0;t<o.length;t++)for(i=Qo[t],l=0;l<a.length;l++){const n=ia[t*a.length+l];r(n,i,ta[l]),n.X()||(n.normalize(),na.add(n))}return yi(n,h,na.buffer,na.length,s,e)},Ri=function(t,i,n){const s=n.j;return n.transform.F(da,ya),w(t.i,ya),t=i.a.s(i.A),0>=ya.s(i.A)-t?null:(X(ya,i.a,i.b,i.c,wa),t=u(ya,wa),(n=n.h.i-t)<=-s+Number.EPSILON?null:(h(ma,wa,ya),ma.normalize(),[ki(i,wa,ma,n)]))},Vi=function(t,i,n){var e=n.j;if(xa.set(0,n.h.j,0),ba.set(0,-n.h.j,0),w(n.transform,xa),w(n.transform,ba),w(t.i,xa),w(t.i,ba),h(za,xa,ba),za.normalize(),t=i.a.s(i.A),xa.s(i.A)<t||ba.s(i.A)<t)return null;var o=i.a,a=i.b,r=i.c;t=Y(o,a,xa,ba,va,Ma);var u=Y(a,r,xa,ba,Bh,Dh);return u+1e-5<t&&(t=u,va.u(Bh),Ma.u(Dh)),(u=Y(r,o,xa,ba,Bh,Dh))+1e-5<t&&(t=u,va.u(Bh),Ma.u(Dh)),X(xa,o,a,r,Bh),(u=l(xa,Bh))+1e-5<t&&(t=u,va.u(Bh),Ma.u(xa)),X(ba,o,a,r,Bh),(o=l(ba,Bh))+1e-5<t&&(t=o,va.u(Bh),Ma.u(ba)),t=Math.sqrt(t),(n=n.h.i-t)<=-e+Number.EPSILON?null:(h(Ca,va,Ma),Ca.normalize(),e=za.s(i.A),1e-5>Math.abs(e)&&Ei(i,xa,ba,ka,Aa,t)?(s(va,i.A,-t),va.add(ka),h(Ca,va,ka),Ca.normalize(),e=ki(i,va,Ca,n),s(ja,i.A,-t),ja.add(Aa),h(Ia,ja,Aa),Ia.normalize(),i=ki(i,ja,Ia,n),e.i<i.i?(pl(i.l,i),[e]):i.i<e.i?(pl(e.l,e),[i]):[e,i]):[ki(i,va,Ca,n)])},qi=function(t,n,h){let s=0,e=h.g;do{Da.length===s&&Da.push(new i),t.transform.F(e.g.position,Da[s]),w(n.i,Da[s]),s++,e=e.h}while(e!==h.g);return s},Wi=function(t,i,n,h){const e=n.j;if(!h.Ta){h.Ta=Bi(n,Pa),h.qb=Rt(n.h).length;for(var o=0;o<h.qb;o++)w(t.i,h.Ta[o])}if(!h.Sa)for(h.Sa=Ni(n,Oa),h.pb=qt(n.h).length,o=0;o<h.pb;o++)t.i.V(h.Sa[o]);var a=[i.a,i.c,i.b];48>=Rt(n.h).length?((o=th(cl.ma)).J(n,h.Ta,h.qb),fl[cl.ma].push(o)):((o=th(cl.za)).J(n,t.transform,t.i),fl[cl.za].push(o));var r=th(cl.ma);if(r.J(t,a,a.length),fl[cl.ma].push(r),0===(h=yi(r,o,h.Sa,h.pb,Na,e)))return ih(),null;if(0===(o=yi(o,r,[i.A],1,Ba,e)))return ih(),null;if(h-1e-5<o){h=!0,o=Na,La.u(Na),x(t.transform,Na,Ea),n.i.V(Ea),r=Di(Ea,n);var l=qi(n,t,r);r=Da,t=a,n=a.length}else h=!1,o=Ba,s(La,Ba,-1),r=a,l=a.length,x(t.transform,i.A,Ea),n.i.V(Ea),a=Si(Ea,n),n=qi(n,t,a),t=Da;if(0===(t=Oi(t,n,r,l,o)).length)return ih(),null;for(n=[],a=r[0].s(o),r=0;r<t.length;r++){const u=(l=t[r]).s(o)-a;u>e||(h||(s(Sa,o,u),l.add(Sa)),l=ki(i,l,La,-u),n.push(l))}return ih(),n},Xi=function(t,i){return 1e-5<Math.abs(i.h-t.h)?i.h-t.h:t.i!==i.i?t.i-i.i:1e-5<Math.abs(t.g.x-i.g.x)?t.g.x-i.g.x:1e-5<Math.abs(t.g.y-i.g.y)?t.g.y-i.g.y:t.g.z-i.g.z},Yi=function(t,i,h,e,o){for(let a=0;a<h.length;a++){const r=h[a],l=th(cl.P);l.o=t,l.v=i,e&&(l.m=!0),x(t.transform,r.A,l.i),l.i.scale(-1),l.l=r.h,t.transform.F(r.g,l.h),s(l.g,r.A,r.h),l.g.add(l.h),n(l.j,l.h,l.g),l.j.scale(.5),l.h.u(r.g),w(l.v.i,l.g),o.add(l),pl(r.l,r)}},Zi=function(t,i,n,h,s){let e=t,o=i;8!==t.h.ba&&(e=i,o=t);var a=o.j;Fa.transform(o.m,e.i);var r={};t=[],i=[];var l=[],u=zt(e.h);do{if(A(u.g,Fa,a))if(u.h){var f=n(e,u.h,o,r);if(u=l.pop(),null!==f){for(var c=0;c<f.length;c++){const n=f[c];0===n.i?t.push(n):i.push(n)}if(h)break}}else l.push(u.j),u=u.l;else u=l.pop()}while(u);if(0!==t.length||0!==i.length)if(h)Yi(e,o,0!==t.length?t:i,h,s);else{if(i.sort(Xi),0!==i.length){for(n=new Set,a=0;a<t.length;a++)r=t[a],n.add(r.j.a),n.add(r.j.b),n.add(r.j.c);for(c=a=null,r=0;r<i.length;r++)f=(u=1===(l=i[r]).i?n.has(l.o)&&n.has(l.m):n.has(l.g))&&!!a&&1e-5>Math.abs(a.h-l.h),c=!!c&&1e-5>Math.abs(c.h-l.h)&&g(c.g,l.g)&&g(c.A,l.A),n.add(l.j.a),n.add(l.j.b),n.add(l.j.c),c||u&&!f?pl(l.l,l):(t.push(l),a=l),c=l}0!==t.length&&Yi(e,o,t,h,s)}},$i=function(){this.g=new Ht,this.h=new ds},Qi=function(t,i,n,h){var s=i,e=n;if(8&(s.g|e.g))s=!1;else if(s.g&e.g&65536){var o=tr;s=!(0!==o.l.size&&o.l.has(Math.min(s.id,e.id)+(Math.max(s.id,e.id)<<16))||0===he[(7&s.g)+(s.h.M?16:8)][(7&e.g)+(e.h.M?16:8)]||(s.h.j&e.h.o)===s.h.j&&(e.h.j&s.h.o)===e.h.j)}else s=!0;if(s)for(i.id>n.id&&(s=i,i=n,n=s),i=Fn(i),n=Fn(n),s=tr.o,e=0;e<i.length;e++){o=i.buffer[e];for(let i=0;i<n.length;i++){const e=n.buffer[i];s[o.h.Y]&1<<e.h.Y||t.i(o,e,h)}}},tn=function(){pc.markPhysics3dModuleAsUsed(),this.h=$n(35),this.l=null,this.g=this.j=this.i=0;const t=al;t[this.h+3]=-1/0,t[this.h+4]=1/0},nn=function(t,i,n){const h=al;for(t=t.h+11;i<n;i++)h[t+i]=0},hn=function(){pc.markPhysics3dModuleAsUsed(),this.active=!1,this.g=null,this.o=!1,this.h=null,this.v=!1,this.K=this.H=this.G=-0,this.i=[],this.B=-0,this.N=this.I=1/0,this.m=this.l=1,this.j=null,this.D=!1,this._component=null},sn=function(t){t.active=!1,t.g=null,t.o=!1,t.h=null,t.v=!1,t.l=1,t.m=1,t.G=0,t.H=0,t.K=0;for(let i=0;i<t.i.length;i++)t.i[i].Za();t.B=0,t.I=1/0,t.N=1/0,t.j=null},en=function(t){t.g&&1&t.g.g&&t.g.O(!0),t.h&&1&t.h.g&&t.h.O(!0)},on=function(t){const i=t.g,n=t.h;i&&n&&yn(i,n,t.D)},an=function(){hn.call(this),this.i.push(new tn),this.L=null},rn=function(){hn.call(this),this.i.push(new tn,new tn),this.L=null,this.R=0},ln=function(){this.i=new ds,this.h=new ds,this.g=new ds,this.j=10},un=function(t,i){i.j=t,i.g&&gn(t,i,i.g),i.h&&gn(t,i,i.h)},gn=function(t,i,n){t=t.i,n=n.id,t.length<=n&&t.Ua(n+1,null);let h=t.buffer[n];null===h&&(h=new ds,t.buffer[n]=h),h.add(i)},fn=function(t,i){const n=i.g,h=i.h;t=t.i.buffer,n&&et(t[n.id],i),h&&et(t[h.id],i)},cn=function(){this.m=this.o=this.l=this.i=this.j=this.h=null},pn=function(){this.g=new Nt,this.h=new $i,this.B=new cn,this.i=new ln,this.j=[],this.D=new i(0,-9.8,0),this.v=2,this.o=new Uint32Array(32),this.m=new Set,this.l=new Set},dn=function(t,i){var n=tr;return 0!==n.m.size&&n.m.has(Math.min(t.h,i.h)+(Math.max(t.h,i.h)<<16))},yn=function(t,i,n){var h=tr;const s=Math.min(t.id,i.id);t=Math.max(t.id,i.id),n?h.l.add(s+(t<<16)):0!==h.l.size&&h.l.delete(s+(t<<16))},mn=function(t){P.call(this,2),this.body=t,this.g=[],this.M=!1,this.o=this.j=0,this.m=new i,this.i=new G,this.h=0},wn=function(t){t.g.length=0,t.l.min.set(0,0,0),t.l.max.set(0,0,0),t.M=!1,t.j=0,t.o=0,U(t.i),t.h=0},xn=function(t,i){for(let n=0;n<t.g.length;n++)if(t.g[n].g.h===i)return t.g[n];return null},bn=function(t){return 4&t.h||2&t.h&&vn(t),t.m},zn=function(t){t.h|=1,t.h|=2},vn=function(t){t.h&=-3;var i=t.body;i=1&i.g?i.G:1/0,U(t.i);for(var n=0,h=0;h<t.g.length;h++)t.g[h].g.M||n++;if(0===n||1/0===i)(n=t.i.g).data[0]=n.data[4]=n.data[8]=1,t.i.i=i,4&t.h||t.m.set(0,0,0);else{for(n=0;n<t.g.length;n++)(h=t.g[n]).g.M||(h.g.Aa(Ar),Ar.transform(h.i,h.j),t.i.add(Ar));t.i.scale(i),4&t.h?(s(Cr,t.m,-1),H(t.i,Cr)):(t.m.u(t.i.h),t=t.i,s(kh,t.h,-1),H(t,kh),J(t))}},jn=function(t,n){pc.markPhysics3dModuleAsUsed(),this.id=t,this.h=new mn(this),this.Ha=new v,this.H=new v,this.bb=-0,this.G=n||1/0,this.aa=1/n,this.g=17,this.K=Br,this.I=new i,this.D=new i,this.o=new c(0,0,0,1),this.l=new i,this.N=new i,this.j=new i,this.L=new i,this.S=7+Number.EPSILON,this.ha=new y,m(this.ha),this.Ia=new y,m(this.Ia),this.R=new N,this.m=this.i=this.cb=this.eb=0,this.W=.1,this.B=new i,this.v=new i,this.Ja=$n(6),this.cache=new Lr(this),this._fauxComponent=this._component=null},Mn=function(t){if(!(8192&t.g))return t.Ha;t.g&=-8193,Er.ua(t.o,t.D);var i=t.Ha,n=i.transform,h=t.h;if(1&h.h){h.h&=-2;var s=h.l;if(s.min.x=s.min.y=s.min.z=1/0,s.max.x=s.max.y=s.max.z=-1/0,0===h.g.length)s.min.x=s.min.y=s.min.z=0,s.max.x=s.max.y=s.max.z=0;else for(let t=0;t<h.g.length;t++){const i=h.g[t];s.min.x=Math.min(s.min.x,i.h.min.x),s.min.y=Math.min(s.min.y,i.h.min.y),s.min.z=Math.min(s.min.z,i.h.min.z),s.max.x=Math.max(s.max.x,i.h.max.x),s.max.y=Math.max(s.max.y,i.h.max.y),s.max.z=Math.max(s.max.z,i.h.max.z)}h=s}else h=h.l;return n.call(i,h,Er),t.Ha},kn=function(t){return 4096&t.g&&Ln(t),t.ha},An=function(t){return 4096&t.g&&Ln(t),t.Ia},Cn=function(t,i){(!g(i,t.I)||2048&t.g)&&(t.I.u(i),t.o.F(t.ra(),Gr),t.D.u(i),t.D.U(Gr),Hn(t))},In=function(t,i){d(i,t.o,Number.EPSILON)||(Hr.u(t.Z()),t.o.u(i),t.o.normalize(),Gn(t),Cn(t,Hr))},Pn=function(t,i){if(t.K===Br)return Mn(t);if(16384&t.g){var h=Zr;s(h,t.B,t.aa),h.add(t.l),h.scale(i),Mt(t,i,$r),i=t.Z(),Qr.ua($r,eh),h=Mn(t),t.H.u(h),s(Yr,i,-1),M(t.H),t.H.transform(t.H,Qr),n(Yr,i,Zr),M(t.H),j(t.H,t.H,h),t.bb=Math.max(u(t.H.min,h.min),u(t.H.max,h.max)),t.g&=-16385}return t.H},On=function(t,i){if(1&t.g||(t.g|=512),512&t.g)En(t);else{Nn(t,i);var n=!t.j.X();if(t.l.X()||(s(Kr,t.l,i),Kr.add(t.Z()),Cn(t,Kr)),n){Tr.u(t.j);var h=t.j.length();h<=Number.EPSILON||(1e7<h&&(h=1e7,Tr.normalize(),Tr.scale(1e7)),n=i*h*.5,h=Math.sin(n)/h,n=Math.cos(n),Rr.set(Tr.x*h,Tr.y*h,Tr.z*h,0),p(Rr,Rr,t.o),Rr.x+=t.o.x*n,Rr.y+=t.o.y*n,Rr.z+=t.o.z*n,Rr.w+=t.o.w*n,Rr.normalize(),In(t,Rr))}t.h.M||(n=!!(512&t.g),5e-6>.5*(e(t.l)+e(t.j))?0<t.W&&(t.W=Math.max(0,t.W-i)):t.O(!0),n||0!==t.W||(t.g|=512)),En(t),(i=t.j.length())>t.S&&t.j.scale(t.S/i)}},Nn=function(t,i){s(Ur,t.B,t.aa),t.l.add(Ur),t.da().F(t.v,Ur),t.j.add(Ur);const n=Math.max(0,1-t.eb*i);t.l.scale(n),t.N.scale(n),i=Math.max(0,1-t.cb*i),t.j.scale(i),t.L.scale(i),t.g|=16384},Bn=function(t){t.m&&(An(t).V(t.j),t.j.x*=1&t.m?0:1,t.j.y*=2&t.m?0:1,t.j.z*=4&t.m?0:1,kn(t).V(t.j));const i=t.j.length();i>t.S&&t.j.scale(t.S/i)},Dn=function(t){t.i&&(t.l.x*=1&t.i?0:1,t.l.y*=2&t.i?0:1,t.l.z*=4&t.i?0:1)},Sn=function(t){t.l.set(0,0,0),t.j.set(0,0,0),t.B.set(0,0,0),t.v.set(0,0,0),t.g|=16384},Ln=function(t){t.ha.ua(t.o,t.Z()),b(t.ha,t.Ia),t.g&=-4097},En=function(t){t.B.set(0,0,0),t.v.set(0,0,0),t.l.U(t.N),t.j.U(t.L),t.N.set(0,0,0),t.L.set(0,0,0);const i=al,n=t.Ja;for(let t=0;6>t;t++)i[n+t]=0;t.g=32&t.g?64|t.g:-65&t.g,t.g&=-33,t.g&=-129,t.g&=-257,t.g|=16384},Fn=function(t){if(32768&t.g)for(var i=t.cache;i.g.length;)Vn(ht(i.g));return t.g&=-32769,65536&(t=t.cache).body.g?(t.g.length!==t.body.h.g.length&&Jn(t,t.g),t=t.g):(i=new ds,Jn(t,i),t=i),t},Gn=function(t){t.g|=2048,Hn(t)},Hn=function(t){t.g|=1024,t.g|=4096,t.g|=8192,t.g|=16384,t.g|=32768,t.O()},Jn=function(t,i){const n=t.body.h.g;for(let h=0;h<n.length;h++){const s=th(cl.ta);Un(s,t.body,n[h]),i.add(s)}},_n=function(){this.l=null,this.id="",this.v=this.h=null,this.m=new v,this.position=new i,this.o=new c,this.transform=new y,this.i=new y,this.g=0,this.j=-0,this.cache=new il(this)},Un=function(t,i,n){t.l=i,t.id=`${i.id}->${i.h.g.indexOf(n)}`,t.h=n.g,t.v=n,Kn(t)},Kn=function(t){var i=t.h;h(nl,t.v.j,t.l.ra()),kn(t.l).F(nl,t.position),p(t.o,t.l.o,t.v.i),t.transform.ua(t.o,t.position),b(t.transform,t.i),t.m.transform(i.l,t.transform),t.g=t.l.g,i=t.l,t.j=2!==i.K?0:i.bb},Tn=function(t){return(t=t.cache).h?t=t.h:65536&t.g.l.g?(t.h=Li(t.g,t.l),t=t.h):t=Li(t.g,t.l),t},Rn=function(t){return(t=t.cache).i?t=t.j:(65536&t.g.l.g&&(t.i=!0),t=Ni(t.g,t.j)),t},Vn=function(t){var i=t.cache;null!==i.h&&(i.h.h(),i.h=null),i.i=!1,pl(cl.ta,t)},qn=function(){pc.markPhysics3dModuleAsUsed(),this.I=this.K=this.H=this.D=this.v=this.o=null,this.m=!1,this.j=new i,this.h=new i,this.g=new i,this.i=new i,this.W=this.aa=this.l=0,this.R=this.L=null,this.B=0,this.S=new ds,this.ha=new i,this.N=-0,this["__UnityEngine.Collision"]=null,this["__UnityEngine.ContactPoint"]=null},Wn=function(t){var i=t.D;t.D=t.H,t.H=i,i=t.K,t.K=t.I,t.I=i,i=t.h,t.h=t.g,t.g=i,t.i.scale(-1)},Xn=function(t){h(t.ha,null===t.H?eh:t.H.l,null===t.D?eh:t.D.l)},Yn=function(t){const i=th(cl.P);return i.o=t.o,i.v=t.v,i.D=t.D,i.H=t.H,i.K=t.K,i.I=t.I,i.m=t.m,i.j.u(t.j),i.h.u(t.h),i.g.u(t.g),i.i.u(t.i),i.l=t.l,i.aa=t.aa,i.W=t.W,i.B=t.B,i},Zn=function(t,i){ul[t][gl[t]-1]=i,gl[t]--},$n=function(t){const i=rl;return rl=i+t,al.length<=rl&&((t=new Float64Array(2*al.length)).set(al),al=t),i},Qn=function(t,i){if(ll.length!==t||ul.length!==t)throw Error("Items should be initialized in ascending order");ll.push(i),ul.push([]),gl.push(0),fl.push([])},th=function(t){const i=gl[t],n=ul[t];if(i===n.length)for(let i=0;64>i;i++)n.push(ll[t]());return gl[t]++,n[i]},ih=function(){for(let t=0;t<fl.length;t++)for(;0!==fl[t].length;)Zn(t,fl[t].pop())},nh=function(t,i){Object.keys(i).forEach((n=>{const h=i[n];h!==n&&Object.defineProperty(t,h,{get(){return this[n]},set(t){this[n]=t}})}))},hh=function(t,i,n){if(t[n]!==i){if(t[n])throw Error('Name "'+n+'" was taken after minification');t[n]=i}},sh=function(t){0>t.name.length&&(t.name="")};i.prototype={set:function(t,i,n){this.x=t,this.y=i,this.z=n},u:function(t){this.x=t.x,this.y=t.y,this.z=t.z},add:function(t){this.x+=t.x,this.y+=t.y,this.z+=t.z},U:function(t){this.x-=t.x,this.y-=t.y,this.z-=t.z},multiply:function(t){this.x*=t.x,this.y*=t.y,this.z*=t.z},scale:function(t){this.x*=t,this.y*=t,this.z*=t},length:function(){return Math.sqrt(e(this))},normalize:function(t=1e-5){const i=this.length();return i<t?this.z=this.y=this.x=0:(t=1/i,this.x*=t,this.y*=t,this.z*=t),i},s:function(t){return this.x*t.x+this.y*t.y+this.z*t.z},X:function(t=1e-5){return Math.abs(this.x)<t&&Math.abs(this.y)<t&&Math.abs(this.z)<t}};var eh=new i(0,0,0),oh=new i(1,0,0),ah=new i(0,1,0),rh=new i(0,0,1),lh=new i;c.prototype={set:function(t,i,n,h){this.x=t,this.y=i,this.z=n,this.w=h},u:function(t){this.x=t.x,this.y=t.y,this.z=t.z,this.w=t.w},toString:function(){return"("+this.x+", "+this.y+", "+this.z+", "+this.w+")"},multiply:function(t){const i=this.x,n=this.y,h=this.z,s=this.w,e=t.x,o=t.y,a=t.z;t=t.w,this.x=i*t+s*e+n*a-h*o,this.y=n*t+s*o+h*e-i*a,this.z=h*t+s*a+i*o-n*e,this.w=s*t-i*e-n*o-h*a},normalize:function(){let t=this.length();1e-5>t?(this.x=this.y=this.z=0,this.w=1):(t=1/t,this.x*=t,this.y*=t,this.z*=t,this.w*=t)},g:function(t){var i=t.x;const n=t.y,h=t.z,s=this.x,e=this.y,o=this.z,a=this.w,r=a*i+e*h-o*n,l=a*n+o*i-s*h,u=a*h+s*n-e*i;i=-s*i-e*n-o*h,t.x=r*a+i*-s+l*-o-u*-e,t.y=l*a+i*-e+u*-s-r*-o,t.z=u*a+i*-o+r*-e-l*-s},F:function(t,i){var n=t.x;const h=t.y,s=t.z;t=this.x;const e=this.y,o=this.z,a=this.w,r=a*n+e*s-o*h,l=a*h+o*n-t*s,u=a*s+t*h-e*n;n=-t*n-e*h-o*s,i.x=r*a+n*-t+l*-o-u*-e,i.y=l*a+n*-e+u*-t-r*-o,i.z=u*a+n*-o+r*-e-l*-t},length:function(){const t=this.x,i=this.y,n=this.z,h=this.w;return Math.sqrt(t*t+i*i+n*n+h*h)},X:function(){return(0===this.x||1e-5>Math.abs(this.x))&&(0===this.y||1e-5>Math.abs(this.y))&&(0===this.z||1e-5>Math.abs(this.z))}};var uh=new c;y.prototype={u:function(t){this.g=t.g,this.h=t.h,this.i=t.i,this.D=t.D,this.j=t.j,this.l=t.l,this.m=t.m,this.G=t.G,this.o=t.o,this.v=t.v,this.B=t.B,this.H=t.H,this.I=t.I,this.K=t.K,this.L=t.L,this.N=t.N},ua:function(t,i){var n=t.x+t.x,h=t.y+t.y;const s=t.z+t.z,e=t.x*n,o=t.x*h,a=t.x*s,r=t.y*h,l=t.y*s,u=t.z*s;n*=t.w,h*=t.w,t=t.w*s,this.g=1-(r+u),this.j=o+t,this.o=a-h,this.I=0,this.h=o-t,this.l=1-(e+u),this.v=l+n,this.K=0,this.i=a+h,this.m=l-n,this.B=1-(e+r),this.L=0,this.D=i.x,this.G=i.y,this.H=i.z,this.N=1},F:function(t,i){i.x=this.g*t.x+this.h*t.y+this.i*t.z+this.D,i.y=this.j*t.x+this.l*t.y+this.m*t.z+this.G,i.z=this.o*t.x+this.v*t.y+this.B*t.z+this.H},V:function(t){const i=t.x,n=t.y,h=t.z;t.x=this.g*i+this.h*n+this.i*h,t.y=this.j*i+this.l*n+this.m*h,t.z=this.o*i+this.v*n+this.B*h},multiply:function(t){const i=this.g,n=this.j,h=this.o,s=this.I,e=this.h,o=this.l,a=this.v,r=this.K,l=this.i,u=this.m,g=this.B,f=this.L,c=this.D,p=this.G,d=this.H,y=this.N;let m=t.g,w=t.j,x=t.o,b=t.I;this.g=m*i+w*e+x*l+b*c,this.j=m*n+w*o+x*u+b*p,this.o=m*h+w*a+x*g+b*d,this.I=m*s+w*r+x*f+b*y,m=t.h,w=t.l,x=t.v,b=t.K,this.h=m*i+w*e+x*l+b*c,this.l=m*n+w*o+x*u+b*p,this.v=m*h+w*a+x*g+b*d,this.K=m*s+w*r+x*f+b*y,m=t.i,w=t.m,x=t.B,b=t.L,this.i=m*i+w*e+x*l+b*c,this.m=m*n+w*o+x*u+b*p,this.B=m*h+w*a+x*g+b*d,this.L=m*s+w*r+x*f+b*y,m=t.D,w=t.G,x=t.H,b=t.N,this.D=m*i+w*e+x*l+b*c,this.G=m*n+w*o+x*u+b*p,this.H=m*h+w*a+x*g+b*d,this.N=m*s+w*r+x*f+b*y}},Object.defineProperty(y.prototype,"data",{get:function(){return[this.g,this.j,this.o,this.I,this.h,this.l,this.v,this.K,this.i,this.m,this.B,this.L,this.D,this.G,this.H,this.N]}}),v.prototype={u:function(t){this.min.x=t.min.x,this.min.y=t.min.y,this.min.z=t.min.z,this.max.x=t.max.x,this.max.y=t.max.y,this.max.z=t.max.z},transform:function(t,i){for(gh.set(0,0,0),i.F(gh,fh),ch[0]=t.min.x,ch[1]=t.min.y,ch[2]=t.min.z,ph[0]=t.max.x,ph[1]=t.max.y,ph[2]=t.max.z,dh[0]=fh.x,dh[1]=fh.y,dh[2]=fh.z,yh[0]=fh.x,yh[1]=fh.y,yh[2]=fh.z,mh[0]=i.g,mh[1]=i.h,mh[2]=i.i,mh[3]=i.j,mh[4]=i.l,mh[5]=i.m,mh[6]=i.o,mh[7]=i.v,mh[8]=i.B,t=0;3>t;t++)for(i=0;3>i;i++){const n=mh[3*t+i]*ch[i],h=mh[3*t+i]*ph[i];n<h?(dh[t]+=n,yh[t]+=h):(dh[t]+=h,yh[t]+=n)}this.min.set(dh[0],dh[1],dh[2]),this.max.set(yh[0],yh[1],yh[2])},Ua:function(t){0<t.x?this.max.x+=t.x:this.min.x+=t.x,0<t.y?this.max.y+=t.y:this.min.y+=t.y,0<t.z?this.max.z+=t.z:this.min.z+=t.z}};var gh=new i,fh=new i,ch=[-0,-0,-0],ph=[-0,-0,-0],dh=[-0,-0,-0],yh=[-0,-0,-0],mh=[-0,-0,-0,-0,-0,-0,-0,-0,-0],wh=new i;N.prototype={set(t,i,n,h,s,e,o,a,r){this.data[0]=t,this.data[1]=h,this.data[2]=o,this.data[3]=i,this.data[4]=s,this.data[5]=a,this.data[6]=n,this.data[7]=e,this.data[8]=r},F:function(t,i){i.x=this.data[0]*t.x+this.data[3]*t.y+this.data[6]*t.z,i.y=this.data[1]*t.x+this.data[4]*t.y+this.data[7]*t.z,i.z=this.data[2]*t.x+this.data[5]*t.y+this.data[8]*t.z},add(t){for(let i=0;9>i;i++)this.data[i]+=t.data[i]},U(t){for(let i=0;9>i;i++)this.data[i]-=t.data[i]},multiply:function(t){const i=this.data[0],n=this.data[3],h=this.data[6],s=this.data[1],e=this.data[4],o=this.data[7],a=this.data[2],r=this.data[5],l=this.data[8],u=t.data[0],g=t.data[3],f=t.data[6],c=t.data[1],p=t.data[4],d=t.data[7],y=t.data[2],m=t.data[5];t=t.data[8],this.data[0]=u*i+c*n+y*h,this.data[1]=u*s+c*e+y*o,this.data[2]=u*a+c*r+y*l,this.data[3]=g*i+p*n+m*h,this.data[4]=g*s+p*e+m*o,this.data[5]=g*a+p*r+m*l,this.data[6]=f*i+d*n+t*h,this.data[7]=f*s+d*e+t*o,this.data[8]=f*a+d*r+t*l},get(t,i){return this.data[3*i+t]},u:function(t){for(let i=0;9>i;i++)this.data[i]=t.data[i]}},G.prototype={transform(t,i){B(xh,t),L(this.g,xh,this.g);var n=xh;const h=n.data[3],s=n.data[6],e=n.data[1],o=n.data[4],a=n.data[7],r=n.data[2],l=n.data[5],u=n.data[8];n.data[0]=n.data[0],n.data[1]=h,n.data[2]=s,n.data[3]=e,n.data[4]=o,n.data[5]=a,n.data[6]=r,n.data[7]=l,n.data[8]=u,this.g.multiply(xh),t.g(this.h),J(this),H(this,i)},add(t){const i=this.i+t.i;s(jh,this.h,this.i),s(Mh,t.h,t.i),n(this.h,jh,Mh),this.h.scale(1/i),this.i=i,this.g.add(t.g),J(this)},scale(t){t/=this.i,E(this.g,t),this.i*=t,J(this)}};var xh=new N,bh=new N,zh=new N,vh=new i,jh=new i,Mh=new i,kh=new i,Ah=new N,Ch=new N,Ih=new c;(K.prototype=Object.create(P.prototype)).Aa=function(){throw Error("Not implemented")};var Ph=new i,Oh=new i,Nh=new i,Bh=new i,Dh=new i,Sh=new i,Lh=new i,Eh=new i,Fh=new i,Gh=new i,Hh=new i,Jh=new i,_h=new i,Uh=new i,Kh=new i,Th=new i,Rh=new i,Vh=new i,qh=new i,Wh=new i,Xh=new i,Yh=new i,Zh=new i,$h=new i,Qh=new i,ts=new i,is=new i,ns=new i,hs=new i,ss=new i,es=new i,os=new i;(it.prototype=Object.create(P.prototype)).T=function(t,i){let n=-1/0,h=t.s(this.a);h>n&&(i.u(this.a),n=h),h=t.s(this.b),h>n&&(i.u(this.b),n=h),h=t.s(this.c),h>n&&i.u(this.c)};var as=new i,rs=new i,ls=new i,us=new i,gs=new i,fs=new i,cs=new i,ps=new i;nt.prototype={i(){pl(cl.la,this)}};var ds=class{constructor(){this.buffer=[],this.length=0}add(t){this.buffer.length>this.length?this.buffer[this.length]=t:this.buffer.push(t),this.length++}Ua(t,i){if(!(this.length>=t))if(this.buffer.length>=t)this.length=t;else for(this.length=this.buffer.length;this.length<t;)this.add(i)}fill(t){this.buffer.fill(t)}indexOf(t){for(let i=0;i<this.length;i++)if(this.buffer[i]===t)return i;return-1}clear(){this.length=0}},ys=null,ms=null,ws=null,xs=class{constructor(){this.fa=new i,this.ga=new i,this.C=new i,this.g={wa:{bc:new i}}}wa(t,i,n){const e=this.g.wa.bc;t.T(n,this.fa),s(e,n,-1),i.T(e,this.ga),h(this.C,this.fa,this.ga)}};ys=new class{constructor(){this.g=new xs,this.h=new xs,this.i={xa:{Cc:new i},$:{ia:new i,Xa:new i}}}J(t,i){ot(this.g,t),ot(this.h,i)}xa(t){W(this.g.C,this.h.C,eh,t)}qa(){return this}$(t,i,n){const h=this.i.$.ia,e=this.i.$.Xa,o=this.h.C,a=this.g.fa,r=this.g.ga,l=this.h.fa,u=this.h.ga;Z(t,this.g.C,o,o,h),s(i,a,h.x),s(e,l,h.y),i.add(e),s(n,r,h.x),s(e,u,h.y),n.add(e)}ja(t){const i=ms;return i.J(this.g,this.h,t),i}},ms=new class{constructor(){this.g=new xs,this.h=new xs,this.i=new xs,this.A=new i,this.j={J:{Pa:new i,Qb:new i},qa:{ia:new i},$:{ia:new i,Xa:new i},ja:{Pa:new i,Jb:new i,Rb:new i,Sb:new i}}}J(t,i,n){const s=this.j.J.Pa,e=this.j.J.Qb;ot(this.g,t),ot(this.h,i),ot(this.i,n),h(s,i.C,t.C),h(e,n.C,t.C),r(this.A,s,e)}xa(t){X(eh,this.g.C,this.h.C,this.i.C,t)}qa(t){var i=this.j.qa.ia;Z(t,this.g.C,this.h.C,this.i.C,i),t=1e-5<Math.abs(i.x);var n=1e-5<Math.abs(i.y);return i=1e-5<Math.abs(i.z),t&&n&&i?this:(i=ys,t?n?(t=this.g,n=this.h):(t=this.g,n=this.i):(t=this.h,n=this.i),i.J(t,n),i)}$(t,i,n){const h=this.j.$.ia,e=this.j.$.Xa,o=this.g.fa,a=this.g.ga,r=this.h.fa,l=this.h.ga,u=this.i.fa,g=this.i.ga;Z(t,this.g.C,this.h.C,this.i.C,h),s(i,o,h.x),s(e,r,h.y),i.add(e),s(e,u,h.z),i.add(e),s(n,a,h.x),s(e,l,h.y),n.add(e),s(e,g,h.z),n.add(e)}ja(t){var i=this.j.ja.Pa;const n=this.j.ja.Jb;var s=this.j.ja.Rb,e=this.j.ja.Sb;const o=this.g.C,a=this.h.C;var l=this.i.C;return 1e-5>Math.abs(o.s(this.A)-t.C.s(this.A))?(h(i,o,a),h(n,l,o),h(s,a,l),r(e,this.A,i),e.normalize(),i=1e-5<V(a,e,t.C),r(e,this.A,s),e.normalize(),s=1e-5<V(l,e,t.C),ot(i?this.i:s?this.g:this.h,t),this):(s=ws,e=this.g,l=this.h,i=this.i,t.C.s(this.A)>e.C.s(this.A)?s.J(e,l,i,t):s.J(e,l,t,i),s)}},ws=new class{constructor(){this.g=new xs,this.l=new xs,this.h=new xs,this.j=new xs,this.i=-1}J(t,i,n,h){ot(this.g,t),ot(this.l,i),ot(this.h,n),ot(this.j,h),t=this.g.C,i=this.l.C,n=this.h.C,h=this.j.C,this.i=-1}xa(t){var i=this.g.C,n=this.l.C,s=this.h.C,e=this.j.C;h(Rh,n,e),h(Vh,i,e),h(qh,s,e);let o=-1;var a=!0;let u=1/0;r(Kh,qh,Vh),Kh.s(e)<=Kh.s(eh)&&(X(eh,e,s,i,Th),(a=l(eh,Th))<u&&(t.u(Th),u=a,o=0),a=!1),r(Kh,Rh,qh),Kh.s(e)<=Kh.s(eh)&&(X(eh,e,n,s,Th),(a=l(eh,Th))<u&&(t.u(Th),u=a,o=1),a=!1),r(Kh,Vh,Rh),Kh.s(e)<=Kh.s(eh)&&(X(eh,e,i,n,Th),(e=l(eh,Th))<u&&(t.u(Th),u=e,o=2),a=!1),h(Rh,s,i),h(Vh,n,i),r(Kh,Rh,Vh),Kh.s(i)<=Kh.s(eh)&&(X(eh,i,s,n,Th),l(eh,Th)<u&&(t.u(Th),o=3),a=!1),a&&t.u(eh),this.i=o}qa(t){let i,n,h;0===this.i?(i=this.j,n=this.h,h=this.g):1===this.i?(i=this.j,n=this.l,h=this.h):(2===this.i?(i=this.j,n=this.g):(i=this.g,n=this.h),h=this.l);const s=ms;return s.J(i,n,h),s.qa(t)}$(){throw Error("Cannot extract coordinates from 3-simplex: should be simplified to 2-simplex first")}ja(){throw Error("Cannot extend 3-simplex: should be simplified to 2-simplex first")}};var bs=new i,zs=new i,vs=new i,js=new xs,Ms=new xs,ks=new xs,As=new class{constructor(){this.position=new i}J(t){this.position.u(t)}T(t,i){i.u(this.position)}},Cs=new i,Is=new class{constructor(){this.position=new i,this.h=new i,this.g=new i}J(t,i){n(this.position,t,i),this.position.scale(.5),this.h.u(t),this.g.u(i)}T(t,i){this.h.s(t)>(t=this.g.s(t))?i.u(this.h):i.u(this.g)}};new class{constructor(){this.position=new i,this.g=new v}J(t){n(this.position,t.min,t.max),this.position.scale(.5),this.g.u(t)}T(t,i){const n=this.g.min,h=this.g.max;i.x=0>t.x?n.x:h.x,i.y=0>t.y?n.y:h.y,i.z=0>t.z?n.z:h.z}};var Ps=new class{constructor(){this.a=new i,this.b=new i,this.c=new i,this.position=new i}J(t,i,h){this.a.u(t),this.b.u(i),this.c.u(h),n(this.position,this.a,this.b),this.position.add(this.c),this.position.scale(1/3)}T(t,i){const n=this.a.s(t),h=this.b.s(t);t=this.c.s(t),n>h&&n>t?i.u(this.a):h>t?i.u(this.b):i.u(this.c)}};rt.prototype.get=function(t){if(t>=this.h-this.g)throw Error("Slice overflow");return this.buffer[this.g+t]},rt.prototype.indexOf=function(t){for(let i=0;i<this.h-this.g;i++)if(this.get(i)===t)return i;return-1},lt.prototype={};var Os=new v;(xt.prototype=Object.create(K.prototype)).v=function(){const t=new xt(this.h,this.i,this.o,this.g,this.M);return t.Y=this.Y,t.j=bt(this),t.m=zt(this),t},xt.prototype.T=function(){throw Error("Not implemented for the mesh shape")},xt.prototype.Ba=function(t,i){let n=null;const e=[zt(this)];for(;0<e.length;){var o=e.pop();if(C(o.g,t,i))if(o.h){o=o.h;var a=t,l=i;h(ls,o.b,o.a),h(us,o.c,o.a),r(gs,ls,us),h(fs,l,a);var u=-fs.s(gs);if(0>=u)o=null;else if(h(cs,a,o.a),0>(l=cs.s(gs)/u)||1<l)o=null;else{r(ps,cs,fs);var g=us.s(ps)/u;1.00001<g+(u=-ls.s(ps)/u)||0>g||0>u?o=null:((g=th(cl.la)).h=o,g.g=l*fs.length(),s(g.C,fs,l),g.C.add(a),g.A.u(o.A),Z(g.C,o.a,o.b,o.c,g.ia),g.l=o.g,o=g)}o&&(!n||n.g>o.g)&&(n=o)}else e.push(o.j,o.l)}return n};var Ns=new i,Bs=new i,Ds=new c,Ss=new i,Ls=new i,Es=new i,Fs=new ds,Gs=new ds,Hs=new ds,Js=new i,_s=new ds,Us=new ds,Ks=new ds,Ts=class{constructor(){this.l=this.i=1/0,this.g=null,this.j=1/0}},Rs=new i,Vs=new i,qs=new i,Ws=class extends Ts{J(t){this.g=t}m(t,i,n){return at(t,this.g,i,n)}o(t){return k(this.g.m,t)}},Xs=class extends Ts{constructor(){super(),this.a=new i,this.b=new i,this.c=new i,this.h=new v}J(t,i){i.transform.F(t.a,this.a),i.transform.F(t.b,this.b),i.transform.F(t.c,this.c),this.h.min.x=Math.min(this.a.x,this.b.x,this.c.x),this.h.min.y=Math.min(this.a.y,this.b.y,this.c.y),this.h.min.z=Math.min(this.a.z,this.b.z,this.c.z),this.h.max.x=Math.max(this.a.x,this.b.x,this.c.x),this.h.max.y=Math.max(this.a.y,this.b.y,this.c.y),this.h.max.z=Math.max(this.a.z,this.b.z,this.c.z),this.g=i}m(t,i,n){return Ps.J(this.a,this.b,this.c),at(t,Ps,i,n)}o(t){return k(this.h,t)}};Ot.prototype={J(t){this.body=t}},Nt.prototype.l=function(t){this.i.clear(),this.j.clear();for(var i=0;i<this.g.length;i++){var n=this.g[i],h=t,s=n.body;n.g=jt(s);var e=Pn(s,h);h=e.min,e=e.max;var o=n.buffer;o[0]=h.x,o[1]=h.y,o[2]=h.z,o[3]=e.x,o[4]=e.y,o[5]=e.z,n.i=!!(4&s.g),n.h=!!(512&s.g),n.g=jt(s)}for(this.g.sort(Ct),s=0;s<this.g.length;s++){n=this.g[s];var a=s+1;i=t,h=this.g,e=this.i,o=n.buffer[3];const l=e.length;for(n.g&&(a=0);a<h.length;a++){const t=h[a];if(n!==t){if(t.buffer[0]>=o)break;var r;if(!(r=n.h&&t.h)&&!(r=!n.g&&t.g)&&!(r=n.i&&t.i)){r=n.buffer;const i=t.buffer;r=!(r[1]<i[4]&&r[4]>i[1]&&r[2]<i[5]&&r[5]>i[2])}r||(e.add(n.body),e.add(t.body))}}n.g&&l!==e.length&&this.m(n.body,i,l,e.length)}},Nt.prototype.m=function(t,i,n,h){Ys.clear();const s=o(Zs,t.l)*i;if(!(1e-5>s)){i=[];var e=Mn(t),a=It(e),r=(e=Pt(e))-a;if(!(1e-5>r)){for(var l=this.i.buffer;n<h;n+=2){const t=l[n+1];var u=Mn(t),g=It(u);const h=Pt(u);u=.1*Math.max(r,h-g);let o=a,f=h;a<g&&(o=g,f=e),1e-5<(g=s-Math.max(0,o-f)-Math.max(0,Math.min(e,h)-Math.max(a,g)))&&g>u?i.push(t):Ys.add(t)}if(0<i.length){for(h=0;h<Ys.length;h++)i.push(Ys.buffer[h]);i.push(t),this.j.add(i)}}}};var Ys=new ds,Zs=new i,$s=new i,Qs=new i,te=new i,ie=new i,ne=new i,he={9:{9:2,10:2,12:2,17:1,18:1,20:1},10:{9:2,10:0,12:0,17:1,18:1,20:1},12:{9:2,10:0,12:0,17:1,18:1,20:0},17:{9:1,10:1,12:1,17:1,18:1,20:1},18:{9:1,10:1,12:1,17:1,18:1,20:1},20:{9:1,10:1,12:0,17:1,18:1,20:0}};Ut.prototype={};var se=[1/6,1/24,1/24,1/24,1/60,1/60,1/60,1/120,1/120,1/120],ee=new i,oe=new i,ae=new i;Tt.prototype=Object.create(K.prototype),t.k=Tt.prototype,t.k.T=function(t,i){if(this.I){const n=this.l.max;i.set(0>t.x?-n.x:n.x,0>t.y?-n.y:n.y,0>t.z?-n.z:n.z)}else t=$t(this,t),i.u(t.position)},t.k.zb=function(){const t=new Tt(this.h,this.m,this.g,this.I,this.M);return t.Y=this.Y,t.j=Rt(this),this.v||Yt(this),t.v=this.v,t.i=Vt(this),t.o=qt(this),t.G=Wt(this),t.H=Xt(this),t.B=ti(this),t},t.k.Ba=function(t,i){h(le,i,t),i=0;let n=null;var e=!0;const o=Vt(this);for(let h=0;h<o.length;h++){const s=o[h],a=fi(s,t),r=s.A.s(le),l=-a/r;if(0<a&&(e=!1),!(1e-5<r))if(-1e-5>r)l>i&&(i=l,n=s);else if(1e-5<a)return null}return e||!n||0>i||1<i?null:((e=th(cl.la)).h=this,e.g=i*le.length(),s(e.C,le,i),e.C.add(t),e.A.u(n.A),e)},t.k.Aa=function(t){if(this.I){var i=this.l.max,n=i.x,h=i.y,s=i.z;U(t);var e=1/3*(i=8*n*h*s);n*=n,h*=h,s*=s,t.g.set((h+s)*e,0,0,0,(n+s)*e,0,0,0,(n+h)*e),t.i=i}else i=ti(this),U(t),t.g.data[0]=i.g[5]+i.g[6],t.g.data[4]=i.g[4]+i.g[6],t.g.data[8]=i.g[4]+i.g[5],t.g.data[1]=t.g.data[3]=-i.g[7],t.g.data[5]=t.g.data[7]=-i.g[8],t.g.data[2]=t.g.data[6]=-i.g[9],e=i.g[0],t.h.set(i.g[1]/e,i.g[2]/e,i.g[3]/e),t.i=e},t.k.fb=function(){let t=null,i=null;for(var n=0;n<ue.length;n++){for(var s=1/0,e=-1/0,o=0;o<this.m.length;o++){var a=this.m[o].s(ue[n]);a<s?(t=this.m[o],s=a):a>e&&(i=this.m[o],e=a)}if(null!==t&&null!==i&&e>s)break;i=t=null}if(null===t||null===i)throw Error("Degenerate point cloud, either 1D or 2D");for(n=null,s=-1/0,e=0;e<this.m.length;e++)if((o=this.m[e])!==t&&o!==i){var l=i;h(Fh,a=t,l),h(Gh,a,o),h(Hh,l,o),(a=0>=(a=Gh.s(Fh))?Gh.s(Gh):a>=(l=Fh.s(Fh))?Hh.s(Hh):Gh.s(Gh)-a*a/l)>s&&(s=a,n=o)}if(null===n||Math.abs(s)<Number.EPSILON)throw Error("Degenerate point cloud in 2D");for(h(fe,t,i),h(ce,n,i),r(ge,fe,ce),ge.normalize(Number.EPSILON),e=i.s(ge),s=null,o=-1/0,a=0;a<this.m.length;a++)if((l=this.m[a])!==t&&l!==i&&l!==n){var u=Math.abs(ge.s(l)-e);u>o&&(o=u,s=l)}if(null===s||Math.abs(o)<Number.EPSILON)throw Error("Degenerate point cloud in 2D");o=new ri(t),a=new ri(i),l=new ri(n),u=new ri(s);const g=0>s.s(ge)-e;if(e=this.i=[],g)for(e.push(ei(o,a,l)),e.push(ei(u,a,o)),e.push(ei(u,l,a)),e.push(ei(u,o,l)),o=0;3>o;o++)a=(o+1)%3,ui(pi(e[o+1],1),pi(e[a+1],0)),ui(pi(e[o+1],2),pi(e[0],a));else for(e.push(ei(o,l,a)),e.push(ei(u,o,a)),e.push(ei(u,a,l)),e.push(ei(u,l,o)),o=0;3>o;o++)ui(pi(e[o+1],0),pi(e[(o+1)%3+1],1)),ui(pi(e[o+1],2),pi(e[0],(3-o)%3));for(e=0;e<this.m.length;e++)(o=this.m[e])!==t&&o!==i&&o!==n&&o!==s&&oi(new ri(o),this.i)},t.k.ib=function(){for(var t=hi(this);null!==t;){var i=t.j,n=t;(t=n.i)[t.indexOf(i)]=t[t.length-1],t.pop(),t=[],si(this,i.position,null,n,t);t:if(3>t.length)n=!1;else{for(n=0;n<t.length;n++){var h=t[n],s=n===t.length-1?t[0]:t[n+1];if(h.i.g!==(0===n?t[t.length-1]:t[n-1]).g||h.g!==s.i.g){n=!1;break t}}n=!0}n=[],s=h=null;for(let o=0;o<t.length;o++){var e=t[o];const a=ei(i,e.i.g,e.g);n.push(a),ui(pi(a,2),e.i),e=a.g,null!==h?ui(e.h,h):s=e,h=e}for(ui(s.h,h),i=n,t=0;t<i.length;t++){n=i[t];do{h=ni(n,i)}while(h);this.i.push(n)}for(t=ii(this),n=0;n<t.length;n++)oi(t[n],i);t=hi(this)}},t.k.hb=function(){for(let t=0;t<this.i.length;t++)ni(this.i[t],[])&&(ii(this),t=0)},t.k.gb=function(){this.o=[],this.j=[],this.v=[],this.G=[],this.m=[];for(let n=0;n<this.i.length;n++){const s=this.i[n];let e=s.g;ai(this.o,s.A)||this.o.push(s.A);do{if(-1===this.v.indexOf(e)){this.v.push(e);var t=new i;h(t,e.g.position,e.i.g.position),t.normalize(Number.EPSILON),t.normalize(Number.EPSILON),ai(this.G,t)||this.G.push(t),e.i.g.g.push(e)}t=e.g,-1===this.j.indexOf(t)&&(this.j.push(t),this.m.push(t.position)),e=e.h}while(e!==s.g)}};var re=new v,le=new i,ue=[oh,ah,rh],ge=new i,fe=new i,ce=new i,pe=new i,de=new i,ye=0,me=1,we=[-0,-0],xe=[-0,-0];mi.prototype.J=function(t,i,n){this.i=i,this.j=n},mi.prototype.g=function(t,i){const n=this.i,h=this.j;let s=n[0].s(t),e=s;for(let i=1;i<h;i++){const h=n[i].s(t);h>s?s=h:h<e&&(e=h)}i[0]=e,i[1]=s},mi.prototype.h=function(){pl(cl.ma,this)},wi.prototype.J=function(t){this.i=t},wi.prototype.g=function(t,i){s(be,t,-1),i[0]=-xi(this,be),i[1]=xi(this,t)},wi.prototype.h=function(){pl(cl.ca,this)};var be=new i,ze=new i;bi.prototype.J=function(t,i,n){this.i=t,this.l.u(i),this.j.u(n)},bi.prototype.g=function(t,i){s(Me,t,-1),i[0]=-zi(this,Me),i[1]=zi(this,t)},bi.prototype.h=function(){pl(cl.za,this)};var ve=new i,je=new i,Me=new i;vi.prototype.J=function(t,i,n,h){this.j=t,this.g.u(i),this.A.u(n),this.h=h},ji.prototype.J=function(t,i,n,h,s,e){this.j=t,this.o=i,this.m=n,this.g.u(h),this.A.u(s),this.h=e},Mi.prototype.J=function(t,i,n,h){this.j=t,this.g=i,this.A.u(n),this.h=h};var ke=new i,Ae=new i,Ce=new i,Ie=new i,Pe=[new i,new i],Oe=[new i,new i],Ne=new i,Be=new i,De=new i,Se=new ds,Le=new ds,Ee=new i,Fe=new i;(Gi.prototype=Object.create(K.prototype)).Aa=function(t){var i=this.i,n=this.j;U(t);const h=4/3*Math.PI*i*i*i+Math.PI*i*i*2*n,s=Math.PI*i*i,e=s*(8/15*i*i*i+n*i*i*1.5+4/3*n*i*n+2/3*n*n*n);t.g.set(e,0,0,0,s*(8/15*i*i*i+n*i*i),0,0,0,e),t.i=h},Gi.prototype.T=function(t,i){o(Te,t),s(i,Te,this.i),i.y+=Math.sign(t.y)*this.j},Gi.prototype.Ba=function(t,i){if(Ge.set(0,this.j,0),He.set(0,-this.j,0),W(Ge,He,t,Ue),u(t,Ue)<=this.i)return null;if(h(Je,i,t),i=Je.normalize(),1e-5>Math.abs(i))return null;t:{var n=this.i,e=Je,o=Ge,a=He;h(_e,a,o),h(Ue,t,o),o=_e.s(_e);var r=_e.s(e);const i=_e.s(Ue);var l=e.s(Ue),g=Ue.s(Ue),f=o-r*r;if(0<=(g=(l=o*l-i*r)*l-f*(o*g-i*i-n*n*o))){if(0<(r=i+(f=(-l-Math.sqrt(g))/f)*r)&&r<o){n=f;break t}if(0>=r?Ke.u(Ue):h(Ke,t,a),0<(g=(l=e.s(Ke))*l-(n=Ke.s(Ke)-n*n))){n=-l-Math.sqrt(g);break t}}n=-1}return 0>n||n>i?null:((i=th(cl.la)).h=this,s(i.C,Je,n),i.C.add(t),i.g=n,i.A.x=i.C.x,i.A.z=i.C.z,i.A.y=i.C.y<-this.j?i.C.y+this.j:i.C.y>this.j?i.C.y-this.j:0,i.A.scale(1/this.i),i)};var Ge=new i,He=new i,Je=new i,_e=new i,Ue=new i,Ke=new i,Te=new i;(Hi.prototype=Object.create(K.prototype)).Aa=function(t){var i=this.i;U(t);const n=4/3*Math.PI*i*i*i;i=n*i*i*.4,t.g.set(i,0,0,0,i,0,0,0,i),t.i=n},Hi.prototype.T=function(t,i){o(Ve,t),s(i,Ve,this.i)},Hi.prototype.Ba=function(t,i){if(h(Re,i,t),i=Re.normalize(),1e-5>Math.abs(i))return null;const n=t.s(Re);var a=e(t)-this.i*this.i;if(Math.abs(n)<this.i||0<=n&&0<=a)return null;if(0>(a=n*n-a))return null;const r=Math.sqrt(a);return 0>(a=-n-r)&&(a=-n+r),a>i?null:((i=th(cl.la)).h=this,s(i.C,Re,a),i.C.add(t),i.g=a,o(i.A,i.C),i)};var Re=new i,Ve=new i,qe=new i,We=new i,Xe=new i,Ye=new i,Ze=new i,$e=new i,Qe=new i,to=new i,io=new i,no=new i,ho=new i,so=new i,eo=new i,oo=new i,ao=new i,ro=new i,lo=new i,uo=new i,go=new i,fo=new i,co=new i,po=new i,yo=new i,mo=new i,wo=new i,xo=new i,bo=new i,zo=new i,vo=new i,jo=new i,Mo=new i,ko=new i,Ao=new i,Co=new i,Io=new i,Po=new i,Oo=new i,No=new i,Bo=[],Do=new i,So=new i,Lo=new i,Eo=new c,Fo=new i,Go=new i,Ho=new i,Jo=new i,_o=new i,Uo=new i,Ko=new i,To=new i,Ro=new i,Vo=new i,qo=new i,Wo=new i,Xo=new Map,Yo=new i,Zo=[],$o=[],Qo=[],ta=[],ia=[],na=new ds,ha=new i,sa=new i,ea=new i,oa=new i,aa=new i,ra=new i,la=new i,ua=new i,ga=new i,fa=new i,ca=new i,pa=new i,da=new i,ya=new i,ma=new i,wa=new i,xa=new i,ba=new i,za=new i,va=new i,ja=new i,Ma=new i,ka=new i,Aa=new i,Ca=new i,Ia=new i,Pa=[],Oa=[],Na=new i,Ba=new i,Da=[],Sa=new i,La=new i,Ea=new i,Fa=new v,Ga={16:function(t,i,e,o){var a=t.j+i.j;const r=t.position,l=i.position;h(Ye,l,r);const u=Ye.length(),g=t.h.i+i.h.i;u-a>=g||((a=th(cl.P)).o=t,a.v=i,e?a.m=!0:(1e-5>u?a.i.set(0,1,0):s(a.i,Ye,1/u),a.l=g-u,s(a.h,a.i,t.h.i),s(a.g,a.i,-i.h.i),n(a.j,a.h,a.g),a.j.add(r),a.j.add(l),a.j.scale(.5)),o.add(a))},17:function(t,i,s,e){var o=t.j+i.j;let a=t,r=i;16!==t.h.ba&&(a=i,r=t),qe.set(0,r.h.j,0),We.set(0,-r.h.j,0),w(r.transform,qe),w(r.transform,We),W(qe,We,a.position,Xe),t=u(Xe,a.position),(t=a.h.i+r.h.i-t)<=-o+Number.EPSILON||((o=th(cl.P)).o=a,o.v=r,s?o.m=!0:(o.l=t,h(o.i,Xe,a.position),s=o.i.length(),1e-5>Math.abs(s)?o.i.set(0,1,0):o.i.scale(1/s),o.h.u(o.i),o.h.scale(a.h.i),o.h.add(a.position),o.g.u(o.i),o.g.scale(-r.h.i),o.g.add(Xe),n(o.j,o.h,o.g),o.j.scale(.5),w(a.i,o.h),w(r.i,o.g)),e.add(o))},20:function(t,i,e,a){var r=t,l=i;if(16!==t.h.ba&&(r=i,l=t),t=l,As.J(r.position),at(t,As,Ze,Cs))i=r.j+l.j,h(Qe,Ze,r.position),(t=o(to,Qe,Number.EPSILON))+Number.EPSILON>=r.h.i+i||((i=th(cl.P)).o=r,i.v=l,e?i.m=!0:(i.l=r.h.i-t,i.i.u(to),s(i.h,to,r.h.i),i.h.add(r.position),i.g.u(Ze),n(i.j,i.h,i.g),i.j.scale(.5),w(r.i,i.h),w(l.i,i.g)),a.add(i));else{if((t=th(cl.P)).o=r,t.v=l,e)t.m=!0;else{(e=th(cl.ca)).J(r),fl[cl.ca].push(e),(i=th(cl.ca)).J(l),fl[cl.ca].push(i);var u=Rn(l);if(0===(e=yi(e,i,u,u.length,$e)))throw Error("Center of the sphere is inside the complex hull, but SAT thinks that they do not overlap.");t.l=e,s(t.i,$e,-1),s(t.h,t.i,r.h.i),t.h.add(r.position),s(t.g,$e,e-r.h.i),t.g.add(r.position),n(t.j,t.h,t.g),t.j.scale(.5),w(r.i,t.h),w(l.i,t.g),ih()}a.add(t)}},1:function(t,i,n,e){var o=t.j+i.j;io.set(0,t.h.j,0),no.set(0,-t.h.j,0),w(t.transform,io),w(t.transform,no),ho.set(0,i.h.j,0),so.set(0,-i.h.j,0),w(i.transform,ho),w(i.transform,so);var a=Math.sqrt(Y(io,no,ho,so,eo,oo)),r=t.h.i+i.h.i;a>r+o||((o=th(cl.P)).o=t,o.v=i,n?(o.m=!0,e.add(o)):(1e-5>a?o.i.set(0,1,0):(h(o.i,oo,eo),o.i.normalize()),o.l=r-a,h(ao,no,io),ao.normalize(),h(ro,so,ho),ro.normalize(),n=ao,.99999<(n=Math.abs(n.s(ro)))&&1.00001>n?(n=$(io,lo),a=-$(no,uo),0>n||0>a?(Ji(o,eo,oo),e.add(o)):((r=th(cl.P)).o=t,r.v=i,r.i.u(o.i),r.l=o.l,0===n?Ji(o,io,lo):(s(eo,ao,n),eo.add(io),Ji(o,eo,lo)),0===a?Ji(r,no,uo):(s(eo,ao,-a),eo.add(no),Ji(r,eo,uo)),e.add(o),e.add(r))):(Ji(o,eo,oo),e.add(o))))},5:function(t,i,n,e){var o=t,r=i;if(1!==t.h.ba&&(o=i,r=t),Ro.set(0,o.h.j,0),Vo.set(0,-o.h.j,0),w(o.transform,Ro),w(o.transform,Vo),t=r,Is.J(Ro,Vo),at(t,Is,qo,Wo)){if(t=r,i=o.j+t.j,W(Ro,Vo,qo,So),h(Lo,qo,So),r=Lo.normalize(Number.EPSILON),!((r=o.h.i-r)<=-i+Number.EPSILON))if((i=th(cl.P)).o=o,i.v=t,n)i.m=!0,e.add(i);else if(i.l=r,i.i.u(Lo),h(To,Vo,Ro),To.normalize(),n=To.s(Lo),.01<Math.abs(n))_i(i,So,qo),e.add(i);else{var l=(n=t.o).x,u=n.y,f=n.z;const h=n.w;for(0==(l=l*l+u*u+f*f+h*h)?Eo.x=Eo.y=Eo.z=Eo.w=0:(l=-1/l,Eo.x=n.x*l,Eo.y=n.y*l,Eo.z=n.z*l,Eo.w=n.w*-l),Eo.F(Lo,Fo),Fo.scale(-1),n=null,l=Vt(t.h),u=0;u<l.length;u++)if(f=l[u],g(f.A,Fo,.01)){n=f;break}null===n?(_i(i,So,qo),e.add(i)):(t.i.F(Ro,Go),t.i.F(Vo,Ho),n=Ui(Go,Ho,n,Jo,_o),t.transform.F(Jo,Uo),t.transform.F(_o,Ko),n?((n=th(cl.P)).o=o,n.v=t,n.i.u(i.i),n.l=i.l,s(i.g,Lo,o.h.i-r),i.g.add(Uo),s(n.g,Lo,o.h.i-r),n.g.add(Ko),_i(i,Uo,i.g),_i(n,Ko,n.g),e.add(i),e.add(n)):(_i(i,So,qo),e.add(i)))}}else if(t=o,o=r,n)(r=th(cl.P)).o=t,r.v=o,r.m=!0,e.add(r);else{for(h(No,Ro,Vo),No.normalize(),n=Rn(o),r=qt(o.h).length,i=Wt(o.h),Pi(Bo,r+i.length),l=0;l<n.length;l++)Bo[l].u(n[l]);for(n=0;n<i.length;n++)l=Bo[r],o.o.F(i[n],l),a(l,No),l.normalize(),l.X()||r++;if((i=th(cl.ca)).J(t),fl[cl.ca].push(i),n=Tn(o),0===(r=yi(i,n,Bo,r,Oo)))throw Error("Inner segment of the capsule overlaps convex hull, but SAT does not think so.");if(x(o.i,Oo,Do),null!==(u=Di(Do,o)))h(jo,Ro,Vo),jo.normalize(),i=Ro.s(Oo)<Vo.s(Oo)?Ro:Vo,n=th(cl.P),l=th(cl.P),n.o=l.o=t,n.v=l.v=o,n.l=l.l=r,s(n.i,Oo,-1),s(l.i,Oo,-1),s(n.g,n.i,-(r-t.h.i)),l.g.u(n.g),t=jo.s(n.i),.01<Math.abs(t)?(n.g.add(i),_i(n,i,n.g),l.G(),e.add(n)):(o.i.F(Ro,Mo),o.i.F(Vo,ko),t=Ui(Mo,ko,u,Ao,Co),o.transform.F(Ao,Io),o.transform.F(Co,Po),t?(n.g.add(Io),l.g.add(Po),_i(n,Io,n.g),_i(l,Po,l.g),e.add(n),e.add(l)):(n.g.add(i),_i(n,i,n.g),l.G(),e.add(n)));else{if(x(o.i,Oo,Do),null===(i=Zt(o.h,Do)))throw Error("Deep contact: cannot find reference face nor reference edge");if(o.transform.F(i.i.g.position,mo),o.transform.F(i.g.position,wo),s(xo,Oo,-(r-t.h.i)),bo.u(xo),xo.add(mo),bo.add(wo),!tt(Ro,Vo,xo,bo,zo))throw Error("Cannot find an intersection between shifted edge and inner segment");(i=th(cl.P)).o=t,i.v=o,s(i.i,Oo,-1),i.l=r,s(vo,Oo,r-t.h.i),vo.add(zo),_i(i,zo,vo),e.add(i)}ih()}},4:function(t,h,e,o){var a,r=t.j+h.j,l=Wt(t.h).length,u=Wt(h.h).length,g=qt(t.h).length,f=qt(h.h).length,c=Tn(t),p=Tn(h),d=t.l.g&h.l.g&65536&&Xo.get(t.h.h+(h.h.h<<16))||null;if((a=null===d)||(c.g(d,we),p.g(d,xe),a=!(Math.max(0,Math.min(we[1],xe[1])-Math.max(we[0],xe[0]))<=Number.EPSILON)),a)if(d=Rn(t),0===(g=yi(p,c,d,g,ua,r)))Ki(t,h,ua);else if(d=Rn(h),0===(f=yi(c,p,d,f,ga,r)))Ki(t,h,ga);else{if(d=0,1024>l*u&&0===(d=Ti(t,h,c,p,fa,r)))return void Ki(t,h,fa);if(e)(r=th(cl.P)).o=t,r.v=h,r.m=!0,o.add(r);else if(0===d||Math.abs(g)-1e-5<Math.abs(d)||Math.abs(f)-1e-5<Math.abs(d)){if(p=t,c=h,e=ua,g>=f+1e-5&&(p=h,c=t,e=ga),x(p.i,e,pa),null===(l=Di(pa,p)))throw Error("Cannot find reference face");x(c.i,e,pa),u=Si(pa,c),h=c,(t=p).o.F(l.A,Yo),c=0,p=l.g;do{Zo.length===c&&Zo.push(new i),t.transform.F(p.g.position,Zo[c]),c++,p=p.h}while(p!==l.g);g=0,p=u.g;do{$o.length===g&&$o.push(new i),h.transform.F(p.g.position,$o[g]),g++,p=p.h}while(p!==u.g);if(0!==(u=Oi($o,g,Zo,c,Yo)).length)for(t.transform.F(l.h,la),l=la.s(e),c=0;c<u.length;c++)(g=(p=u[c]).s(e)-l)>=r||(g=-g,(f=th(cl.P)).o=t,f.v=h,f.l=g,f.i.u(e),s(f.h,e,g),f.h.add(p),f.g.u(p),n(f.j,f.h,f.g),f.j.scale(.5),w(f.o.i,f.h),w(f.v.i,f.g),o.add(f));ih()}else x(t.i,fa,ca),ca.scale(-1),e=Zt(t.h,ca),x(h.i,fa,ca),l=Zt(h.h,ca),r=d,t.transform.F(e.g.position,ha),t.transform.F(e.i.g.position,sa),h.transform.F(l.g.position,ea),h.transform.F(l.i.g.position,oa),s(aa,fa,r),ha.add(aa),sa.add(aa),tt(ha,sa,ea,oa,ra)?((e=th(cl.P)).o=t,e.v=h,e.l=r,s(e.i,fa,-1),s(e.h,aa,-1),e.h.add(ra),e.g.u(ra),n(e.j,e.h,e.g),e.j.scale(.5),w(e.o.i,e.h),w(e.v.i,e.g),ih(),o.add(e)):ih()}},24:function(t,i,n,h){Zi(t,i,Ri,n,h)},9:function(t,i,n,h){Zi(t,i,Vi,n,h)},12:function(t,i,n,h){Zi(t,i,Wi,n,h)},8:function(t,i,n,h){Zi(t,i,Ci,n,h)}};$i.prototype.i=function(t,i,n){if(A(t.m,i.m,t.j+i.j)){var h=he[(7&t.g)+(t.h.M?16:8)][(7&i.g)+(i.h.M?16:8)];if(0!==h&&!dn(t.h,i.h)){var s=1===h,e=Ga[t.h.ba|i.h.ba];if(h=n.length,e(t,i,s,n),h!==(t=n.length))for(i=h;i<t;i++)(h=n.buffer[i]).K=h.o.h,h.I=h.v.h,s=h.o,w(s.v.transform,h.h),h.h.U(s.l.ra()),h.D=s.l,h.o=null,s=h.v,w(s.v.transform,h.g),h.g.U(s.l.ra()),h.H=s.l,h.v=null,h.D.id<h.H.id||Wn(h),h.m||(s=h.K,e=h.I,h.aa=null===s.g&&null===e.g?0:null===s.g?Ii(0,e.g.g,0,e.g.h):null===e.g?Ii(s.g.g,0,s.g.h,0):Ii(s.g.g,e.g.g,s.g.h,e.g.h),s=h.K,e=h.I,h.W=null===s.g&&null===e.g?.6:null===s.g?Ii(0,e.g.j,.6,e.g.i):null===e.g?Ii(s.g.j,0,s.g.i,.6):Ii(s.g.j,e.g.j,s.g.i,e.g.i))}}},$i.prototype.j=function(t,i){var e=t.i;t=t.j;for(var o=0;o<this.g.h;o++){var a=this.g.g[o];if(a.l&=-2,a.i.g&a.j.g&65536){for(var r=!!(a.i.g&a.j.g&512),l=0;l<a.h.length;l++){var g=a.h.buffer[l];g.S.clear(),g.B&=~(sl|el|ol),g.B|=r?el:ol}if(!r)for(r=0;r<a.g.length;r++){g=(l=a.g[r]).D;var f=l.H,c=l.K,p=l.I;c.D&&p.D?c.M||p.M||dn(c,p)||tr.o[c.Y]&1<<p.Y?(St(a,r),r--):(kn(g).F(l.h,$s),kn(f).F(l.g,Qs),n(l.j,$s,Qs),l.j.scale(.5),h(te,$s,Qs),l.l=te.s(l.i),-5e-4>l.l?(St(a,r),r--):(s(te,l.i,Math.abs(l.l)),h(te,$s,te),h(te,Qs,te),5e-4<(g=te.length())/Math.abs(l.l)&&5e-4<g?(St(a,r),r--):Gt(a,l))):(St(a,r),r--)}}else Lt(a)}for(a=0;a<t.length;a++){for(r=(o=t.buffer[a]).pop(),l=[],g=0;g<o.length;g++)for(f=Fn(o[g]),c=0;c<f.length;c++)(p=f.buffer[c]).h.M||l.push(p);0!==l.length&&kt(r,l,i)}for(this.h.clear(),i=0;i<e.length;i+=2)32&((t=e.buffer[i]).g|t.g)||Qi(this,t,e.buffer[i+1],this.h);for(e=0;e<this.h.length;e++)if(t=this.h.buffer[e],a=this.g,o=t.D,r=t.H,(i=a.cache.get(_t(o,r)))||((i=th(cl.Ea)).i=o,i.j=r,(o=i).m=_t(o.i,o.j),a.cache.set(o.m,o),a.g.length>a.h?a.g[a.h]=o:a.g.push(o),a.h++),i.l|=1,Gt(i,t),t.m)t.G();else if(4>i.g.length)i.g.push(t);else{r=i,a=-1,g=(l=t).l,f=1/0,o=-1,c=r.g[0].l,p=!0;for(var d=0;4>d;d++){var y=r.g[d];if(y.l+1e-5>g&&(g=y.l,a=d),l.l>y.l+1e-5){var m=l.l-y.l;const t=u(l.j,y.j);t<m+1e-5&&t<f&&(f=t,o=d)}p&&1e-5<Math.abs(y.l-c)&&(p=!1)}p&&-1!==a&&(a=-2),y=!1,1e-5>(g=Et(r.g[0],r.g[1],r.g[2],r.g[3]))&&(y=!0,g=Ft(r.g[0],r.g[1],r.g[2],r.g[3])),m=Et(l,r.g[1],r.g[2],r.g[3]),y&&1e-5<m&&(g=0,a=-1),p=c=f=d=0,0!==a&&(d=y?Ft(l,r.g[1],r.g[2],r.g[3]):m),1!==a&&(f=y?Ft(l,r.g[0],r.g[2],r.g[3]):Et(l,r.g[0],r.g[2],r.g[3])),2!==a&&(c=y?Ft(l,r.g[0],r.g[1],r.g[3]):Et(l,r.g[0],r.g[1],r.g[3])),3!==a&&(p=y?Ft(l,r.g[0],r.g[1],r.g[2]):Et(l,r.g[0],r.g[1],r.g[2])),r=0,f>(l=d)&&(r=1,l=f),c>l&&(r=2,l=c),p>l&&(r=3,l=p),-1===(a=-1===a?r:1e-5>Math.abs(g-l)&&-1!==o?o:l>g+1e-5?r:-1)?t.G():(i.g[a].G(),i.g[a]=t)}for(e=0;e<this.g.h;e++)if(0===(i=this.g.g[e]).g.length&&0===i.h.length&&(Jt(this.g,e),e--),!(1&i.l)){for(t=!0,a=0;a<i.g.length;a++)if(0<i.g[a].l){t=!1;break}if(!t){for(;i.g.length;)i.g.pop().G();for(t=0;t<i.h.length;t++)i.h.buffer[t].B|=ol}}},t.k=tn.prototype,t.k.Za=function(){const t=al,i=this.h,n=i+11;for(let i=0;12>i;i++)t[n+i]=0;t[i+2]=0,t[i+7]=0,t[i+8]=0,t[i+9]=0,t[i]=0,t[i+5]=0,t[i+3]=-1/0,t[i+4]=1/0,t[i+6]=0,t[i+10]=0,this.l=null,this.j=this.i=this.g=0},t.k.ac=function(t){this.g=t?1|this.g:-2&this.g},t.k.oa=function(t,i,n,h,s,e){const o=al,a=this.h+11;o[a]=t,o[a+1]=i,o[a+2]=n,o[a+3]=h,o[a+4]=s,o[a+5]=e},t.k.Ub=function(){return al[this.h+7]},t.k.mc=function(t){al[this.h+7]=t},t.k.qc=function(t){al[this.h+5]=t},t.k.uc=function(t){al[this.h+3]=t},t.k.vc=function(t){al[this.h+4]=t},t.k.pa=function(t,i,n,h,s,e){const o=al,a=this.h+11;o[a+6]=t,o[a+7]=i,o[a+8]=n,o[a+9]=h,o[a+10]=s,o[a+11]=e},t.k.vb=function(){nn(this,6,12)},t.k.kc=function(){nn(this,0,6)},t.k.vb=function(){nn(this,6,12)},t.k.ec=function(){al[this.h+9]=0},t.k.kb=function(t){const i=al;var n=this.h;const h=n+11;if(n+=23,2&this.g){var s=t.G;i[n]=s*i[h],i[n+1]=s*i[h+1],i[n+2]=s*i[h+2],Ha.x=i[h+3],Ha.y=i[h+4],Ha.z=i[h+5],D(t.g.da(),Ha),i[n+3]=Ha.x/t.l,i[n+4]=Ha.y/t.l,i[n+5]=Ha.z/t.l}else i[n]=i[n+1]=i[n+2]=0,i[n+3]=i[n+4]=i[n+5]=0;4&this.g?(s=t.H,i[n+6]=s*i[h+6],i[n+7]=s*i[h+7],i[n+8]=s*i[h+8],Ha.x=i[h+9],Ha.y=i[h+10],Ha.z=i[h+11],D(t.h.da(),Ha),i[n+9]=Ha.x/t.m,i[n+10]=Ha.y/t.m,i[n+11]=Ha.z/t.m):(i[n+6]=i[n+7]=i[n+8]=0,i[n+9]=i[n+10]=i[n+11]=0)},t.k.lb=function(t){const i=al,n=this.h,h=n+11,s=n+23;i[n+2]=1/(i[h]*i[s]+i[h+1]*i[s+1]+i[h+2]*i[s+2]+i[h+3]*i[s+3]+i[h+4]*i[s+4]+i[h+5]*i[s+5]+i[h+6]*i[s+6]+i[h+7]*i[s+7]+i[h+8]*i[s+8]+i[h+9]*i[s+9]+i[h+10]*i[s+10]+i[h+11]*i[s+11]+i[n+5]/t)},t.k.mb=function(t,i){if(2&this.g){var n=t.G,h=t.g,s=h.l,e=h.j;h=h.B,_a[0]=s.x+n*h.x,_a[1]=s.y+n*h.y,_a[2]=s.z+n*h.z,Ja.u(t.g.v),D(t.g.da(),Ja),_a[3]=e.x+Ja.x/t.l,_a[4]=e.y+Ja.y/t.l,_a[5]=e.z+Ja.z/t.l}else _a[0]=0,_a[1]=0,_a[2]=0,_a[3]=0,_a[4]=0,_a[5]=0;4&this.g?(n=t.H,s=(h=t.h).l,e=h.j,h=h.B,_a[6]=s.x+n*h.x,_a[7]=s.y+n*h.y,_a[8]=s.z+n*h.z,Ja.u(t.h.v),D(t.h.da(),Ja),_a[9]=e.x+Ja.x/t.m,_a[10]=e.y+Ja.y/t.m,_a[11]=e.z+Ja.z/t.m):(_a[6]=0,_a[7]=0,_a[8]=0,_a[9]=0,_a[10]=0,_a[11]=0),s=(t=al)[s=(n=this.h)+11]*_a[0]+t[s+1]*_a[1]+t[s+2]*_a[2]+t[s+3]*_a[3]+t[s+4]*_a[4]+t[s+5]*_a[5]+t[s+6]*_a[6]+t[s+7]*_a[7]+t[s+8]*_a[8]+t[s+9]*_a[9]+t[s+10]*_a[10]+t[s+11]*_a[11],i=((e=t[n+7])-s-t[n+5]*t[n+9])/i,1&this.g&&0<e?(s=z(e/(e-s),0,1),t[n+10]=s):t[n+10]=0,t[n]=i},t.k.rb=function(t){const i=al,n=this.h+11;if(2&this.g){const h=t.g;h.i&&(i[n]*=1&h.i?0:1,i[n+1]*=2&h.i?0:1,i[n+2]*=4&h.i?0:1),64&h.g?(i[n+3]=0,i[n+4]=0,i[n+5]=0):h.m&&(Ua.set(i[n+3],i[n+4],i[n+5]),An(h).V(Ua),Ua.x*=1&h.m?0:1,Ua.y*=2&h.m?0:1,Ua.z*=4&h.m?0:1,kn(h).V(Ua),i[n+3]=Ua.x,i[n+4]=Ua.y,i[n+5]=Ua.z)}4&this.g&&((t=t.h).i&&(i[n+6]*=1&t.i?0:1,i[n+7]*=2&t.i?0:1,i[n+8]*=4&t.i?0:1),64&t.g?(i[n+9]=0,i[n+10]=0,i[n+11]=0):t.m&&(Ua.set(i[n+9],i[n+10],i[n+11]),An(t).V(Ua),Ua.x*=1&t.m?0:1,Ua.y*=2&t.m?0:1,Ua.z*=4&t.m?0:1,kn(t).V(Ua),i[n+9]=Ua.x,i[n+10]=Ua.y,i[n+11]=Ua.z))},t.k.nb=function(t){const i=al;this.l=t,this.g=t.o?2|this.g:-3&this.g,this.g=t.v?4|this.g:-5&this.g,this.i=t.g.Ja,this.j=t.h?t.h.Ja:0,i[this.h+1]=t.K};var Ha=new i,Ja=new i,_a=[-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0],Ua=new i;t.k=hn.prototype,t.k.Oa=function(){this.active=!0,en(this),on(this)},t.k.na=function(){if(this.active=!1,en(this),this.D){var t=this.g,i=this.h;t&&i&&yn(t,i,!1)}},t.k.jb=function(){return!0},t.k.oc=function(t){if(this.g!==t){var i=this.g;if(this.g=t,i&&i.O(!0),t&&t.O(!0),on(this),i&&this.h&&yn(i,this.h,!1),this.j){var n=this.j;i&&et(n.i.buffer[i.id],this),t&&gn(n,this,t)}}},t.k.pc=function(t){if(this.h!==t){var i=this.h;if(this.h=t,i&&i.O(!0),t&&t.O(!0),on(this),i&&this.g&&yn(i,this.g,!1),this.j){var n=this.j;i&&et(n.i.buffer[i.id],this),t&&gn(n,this,t)}}},t.k.rc=function(t){this.D!==t&&(this.D=t,on(this),en(this))},hn.prototype.update=function(){throw Error("Not implemented")},hn.prototype.S=function(){this.o=!!(1&this.g.g)&&1/0!==this.g.G,this.v=null!==this.h&&!!(1&this.h.g)&&1/0!==this.h.G;let t=0;if(this.o){var i=this.g.G*this.l;this.G=1/i,t+=i}this.v&&(i=this.h.G*this.m,this.H=1/i,t+=i),this.K=1/t},(an.prototype=Object.create(hn.prototype)).jb=function(){var t=this.o,i=this.v;const n=this.L.i;return this.o&&this.g.i&&(t=!(1&(t=this.g.i)&&!(.99999>Math.abs(n.x))||2&t&&!(.99999>Math.abs(n.y))||4&t&&!(.99999>Math.abs(n.z)))),this.v&&this.h.i&&(i=!(1&(i=this.h.i)&&!(.99999>Math.abs(n.x))||2&i&&!(.99999>Math.abs(n.y))||4&i&&!(.99999>Math.abs(n.z)))),t||i},an.prototype.na=function(){hn.prototype.na.call(this),null!==this.j&&fn(this.j,this)},an.prototype.update=function(t){const i=al,n=this.i[0],h=n.h;var s=this.L;const e=s.i,o=this.g,r=this.h;this.o?(kn(o).F(s.h,Ka),Ka.U(o.Z()),a(Ka,e),n.oa(-e.x,-e.y,-e.z,-Ka.x,-Ka.y,-Ka.z)):n.oa(0,0,0,0,0,0),this.v?(kn(r).F(s.g,Ka),Ka.U(r.Z()),a(Ka,e),n.pa(e.x,e.y,e.z,Ka.x,Ka.y,Ka.z)):n.pa(0,0,0,0,0,0);var l=s.aa;const u=s.l,g=0>u;let f=0;this.o&&(0<l||g)&&(o.Ra(s.h,Ka),f+=Ka.s(e)),this.v&&(0<l||g)&&(r.Ra(s.g,Ka),f-=Ka.s(e)),s=0<l&&f>tr.v,g?(s?i[h+7]=f*l:(-.05>(l=u/t)&&(l*=.8),i[h+7]=l),n.g&=-2):(t=15*u,s?(i[h+7]=Math.max(f*l,t),n.g&=-2):(i[h+7]=t,n.g|=1))};var Ka=new i;(rn.prototype=Object.create(hn.prototype)).na=function(){hn.prototype.na.call(this),null!==this.j&&fn(this.j,this)},rn.prototype.update=function(){var t=this.i[0];const i=this.i[1],n=al,h=t.h,s=i.h,e=this.L;var o=this.g,a=this.h;kn(o).F(e.h,Ta),Ta.U(o.Z()),kn(a).F(e.g,Ra),Ra.U(a.Z()),o=e.i,a=Va;var l=qa;if(.7071067811865476<Math.abs(o.z)){var u=-o.y*o.y+o.z*o.z,g=1/Math.sqrt(u);a.set(0,-o.z*g,o.y*g),l.set(u*g,-o.x*a.z,o.x*a.y)}else u=o.x*o.x+o.y*o.y,g=1/Math.sqrt(u),a.set(-o.y*g,o.x*g,0),l.set(-o.z*a.y,o.z*a.x,u*g);this.o?(r(Wa,Ta,Va),t.oa(-Va.x,-Va.y,-Va.z,-Wa.x,-Wa.y,-Wa.z),r(Wa,Ta,qa),i.oa(-qa.x,-qa.y,-qa.z,-Wa.x,-Wa.y,-Wa.z)):(t.oa(0,0,0,0,0,0),i.oa(0,0,0,0,0,0)),this.v?(r(Wa,Ra,Va),t.pa(Va.x,Va.y,Va.z,Wa.x,Wa.y,Wa.z),r(Wa,Ra,qa),i.pa(qa.x,qa.y,qa.z,Wa.x,Wa.y,Wa.z)):(t.pa(0,0,0,0,0,0),i.pa(0,0,0,0,0,0)),t=2*e.W,n[h+6]=t,n[s+6]=t,t=4/this.R*19.6/this.K,n[h+3]=-t,n[s+3]=-t,n[h+7]=0,n[s+7]=0};var Ta=new i,Ra=new i,Va=new i,qa=new i,Wa=new i;t.k=ln.prototype,t.k.ub=function(t){for(let h=0;h<t.h;h++){const s=t.g[h];for(let t=0;t<s.g.length;t++){const h=s.g[t];var i=null===h.L,n=0<h.W&&null===h.R&&-.01<h.l;if(!i&&n&&(fn(this,h.L),un(this,h.L)),i){i=th(cl.Da),sn(i),i.g=h.D,i.h=h.H,i.L=h;const t=al,n=i.i[0].h;t[n+3]=0,t[n+4]=1/0,hn.prototype.Oa.call(i),un(this,i),h.L=i}n&&(n=th(cl.Fa),sn(n),n.g=h.D,n.h=h.H,n.L=h,hn.prototype.Oa.call(n),un(this,n),h.R=n),h.R&&(h.R.R=s.g.length)}}},t.k.sb=function(t,i){this.h.clear(),this.g.clear(),this.g.add(0);for(let s=0;s<t.length;s++){var n=t[s];if(1&n.g&&!(128&n.g)&&(Xa.clear(),Ya.clear(),Xa.add(n),this.Qa(n,Xa,Ya,!0),0!==Ya.length)){n=!0;for(var h=0;h<Xa.length;h++){const t=Xa.buffer[h];1&t.g||(t.g&=-129),512&t.g||(n=!1)}if(!n){for(n=0;n<Xa.length;n++)1&(h=Xa.buffer[n]).g&&h.O();for(n=this.h.length,h=0;h<Ya.length;h++)this.tb(Ya.buffer[h],i);n!==(h=this.h.length)&&this.g.add(h)}}}1===this.g.length&&this.g.clear()},t.k.Qa=function(t,i,n,h){if(t.g|=128,t.g|=256,!(this.i.buffer.length<=t.id)){var s=this.i.buffer[t.id];if(s&&0!==s.length){var e=i.length;for(let h=0;h<s.length;h++){const e=s.buffer[h];if(!e.active)continue;const o=e.g===t?e.h:e.g;o?256&o.g||(128&o.g||(i.add(o),o.g|=128),n.add(e)):n.add(e)}if(h)for(t=e;t<i.length;t++)1&(h=i.buffer[t]).g&&!(256&h.g)&&this.Qa(h,i,n,!1)}}},t.k.tb=function(t,i){if(t.B=0,t.S(),t.jb()){t.update(i);var n=al;for(let h=0;h<t.i.length;h++){const s=t.i[h],e=s.h;n[e+8]=0,s.nb(t),s.rb(t),s.kb(t),s.lb(i),s.mb(t,i),n[e+2]<1/1e-5&&this.h.add(s)}}},t.k.xb=function(t){if(0!==this.g.length)for(let i=0;i<this.g.length-1;i++)this.yb(t,this.g.buffer[i],this.g.buffer[i+1])},t.k.yb=function(t,i,n){const h=al;t=1/t;const s=this.h.buffer;for(var e=i;e<n;e++){var o=s[e],a=o.h,r=h[a+9];if(h[a+8]=r,0!==r){var l=o.i,u=o.j;a+=23,2&(o=o.g)&&(h[l]+=r*h[a],h[l+1]+=r*h[a+1],h[l+2]+=r*h[a+2],h[l+3]+=r*h[a+3],h[l+4]+=r*h[a+4],h[l+5]+=r*h[a+5]),4&o&&(h[u]+=r*h[a+6],h[u+1]+=r*h[a+7],h[u+2]+=r*h[a+8],h[u+3]+=r*h[a+9],h[u+4]+=r*h[a+10],h[u+5]+=r*h[a+11])}}for(e=0;e<this.j;e++){for(r=0,l=-0,u=i;u<n;u++){var g=s[u];o=!!(2&(a=g.g)),a=!!(4&a);const i=g.i,n=g.j;var f=(g=g.h)+11;const e=g+23;var c=h[g];const d=h[g+1];var p=h[g+2];const y=h[g+6];let m=h[g+3],w=h[g+4];0!==y&&(m=Math.max(m,-l*y),w=-m);const x=h[g+5];let b=-0;o&&(b+=h[f]*h[i]+h[f+1]*h[i+1]+h[f+2]*h[i+2]+h[f+3]*h[i+3]+h[f+4]*h[i+4]+h[f+5]*h[i+5]),a&&(b+=h[f+6]*h[n]+h[f+7]*h[n+1]+h[f+8]*h[n+2]+h[f+9]*h[n+3]+h[f+10]*h[n+4]+h[f+11]*h[n+5]),f=h[g+8],c=z(.99*(c-b)*p+f,m,w),h[g+8]=c,p=c-f,r=Math.max(r,Math.abs(p)*d),x&&(h[g]-=x*p*t),0===y&&(l=c),o&&(h[i]+=p*h[e],h[i+1]+=p*h[e+1],h[i+2]+=p*h[e+2],h[i+3]+=p*h[e+3],h[i+4]+=p*h[e+4],h[i+5]+=p*h[e+5]),a&&(h[n]+=p*h[e+6],h[n+1]+=p*h[e+7],h[n+2]+=p*h[e+8],h[n+3]+=p*h[e+9],h[n+4]+=p*h[e+10],h[n+5]+=p*h[e+11])}if(1e-4>=r)break}},t.k.$a=function(t){const i=this.h.buffer,n=this.h.length,h=al;for(let l=0;l<n;l++){var e=i[l];const n=e.l;var o=e.h;const u=o+11,g=h[o+10];var a=h[o+8];if(h[o+9]=a*(1-g),2&(e=e.g)){var r=(o=n.G)*a*t;const i=a*t,e=n.g;Za.x=r*h[u],Za.y=r*h[u+1],Za.z=r*h[u+2],e.l.add(Za),0!==g&&(s($a,Za,g),e.N.add($a)),Za.scale(1/(o*t)),n.B+=Za.length(),$a.x=i*h[u+3],$a.y=i*h[u+4],$a.z=i*h[u+5],e.da().F($a,Qa),Qa.scale(1/n.l),e.j.add(Qa),0!==g&&(Qa.scale(g),e.L.add(Qa))}4&e&&(o=(e=n.H)*a*t,a*=t,r=n.h,Za.x=o*h[u+6],Za.y=o*h[u+7],Za.z=o*h[u+8],r.l.add(Za),0!==g&&(s($a,Za,g),r.N.add($a)),Za.scale(1/(e*t)),n.B+=Za.length(),$a.x=a*h[u+9],$a.y=a*h[u+10],$a.z=a*h[u+11],r.da().F($a,Qa),Qa.scale(1/n.m),r.j.add(Qa),0!==g&&(Qa.scale(g),r.L.add(Qa))),n.I!==Number.POSITIVE_INFINITY&&n.B>n.I&&(n.active=!1)}};var Xa=new ds,Ya=new ds,Za=new i,$a=new i,Qa=new i;cn.prototype.g=function(t){for(let i=0;i<t.h;i++){const n=t.g[i];for(let t=0;t<n.h.length;t++){const i=n.h.buffer[t];if(i.B&sl)i.m?this.l(i):this.h(i);else if(i.B&el)i.m?this.o(i):this.j(i);else if(i.B&ol){if(xn(i.D.h,i.K.h)&&xn(i.H.h,i.I.h)&&(i.m?this.m(i):this.i(i)),0===n.h.length)break;i.G(),st(n.h,t),t--}}}};var tr=null;t.k=pn.prototype,t.k.Cb=function(t){const i=this.j;for(var n=0;n<i.length;n++){var h=i[n],e=!!(1&h.g)&&1/0!==h.G;16&h.g&&e&&(s(yr,this.D,h.G*t),h.B.add(yr)),h.i&&(h.B.x*=1&h.i?0:1,h.B.y*=2&h.i?0:1,h.B.z*=4&h.i?0:1),h.m&&(An(h).V(h.v),h.v.x*=1&h.m?0:1,h.v.y*=2&h.m?0:1,h.v.z*=4&h.m?0:1,kn(h).V(h.v))}this.g.l(t),this.h.j(this.g,t),this.i.ub(this.h.g),this.i.sb(this.g.h,t),this.i.xb(t),this.i.$a(t),n=this.h;for(let i=0;i<n.g.h;i++){h=n.g.g[i],e=t;for(let t=0;t<h.h.length;t++){var o=h.h.buffer[t],a=e;if(o.N=0,!o.m){for(let t=0;t<o.S.length;t++){const i=o.S.buffer[t].L;null!==i&&(o.N+=i.B)}o.N*=a,o.D.g&o.H.g&1&&(o.N/=2)}}}for(n=0;n<i.length;n++)h=i[n],jt(h)||On(h,t);At(i,t)},t.k.Tb=function(){this.B.g(this.h.g)},t.k.Ob=function(t){if(65536&t.g)throw Error("The body already belongs to a physics world!");t.g|=65536,t.ea(),this.j.push(t);var i=this.g;i.h.push(t);const n=th(cl.Ga);n.J(t),i.g.push(n)},t.k.ic=function(t){for(var i=0;i<this.j.length;i++)if(this.j[i]===t){this.j.splice(i,1),i=this.g;for(var n=t,h=0;h<i.h.length;h++)if(i.h[h]===n){i.h[h]=i.h[i.h.length-1],i.h.pop();break}for(h=0;h<i.g.length;h++)if(i.g[h].body===n){pl(cl.Ga,i.g[h]),i.g[h]=i.g[i.g.length-1],i.g.pop();break}break}for(t.g&=-65537,i=this.h,n=0;n<i.g.h;n++)((h=i.g.g[n]).i===t||h.j===t)&&(Jt(i.g,n),n--)},t.k.Ab=function(t){un(this.i,t)},t.k.Bb=function(t){fn(this.i,t)},t.k.xc=function(t,i,n,h){return pc.markPhysics3dModuleAsUsed(),0!==(t=this.Wa(t,i,1,n,h)).length&&(t[0].i(),!0)},t.k.fc=function(t,i,n,h){if(0===(t=this.Wa(t,i,Number.MAX_SAFE_INTEGER,n,h)).length)return null;for(i=t[0],n=1;n<t.length;n++)(h=t[n]).g<i.g?(i.i(),i=h):h.i();return i},t.k.Wa=function(t,i,n,h,s){pc.markPhysics3dModuleAsUsed(),ir.set(t.x,t.y,t.z),nr.set(i.x,i.y,i.z),t=this.g,i=ir;var e=nr;const o=[];for(let a=0;a<t.h.length;a++){const r=t.h[a];if(0!=(r.h.j&h)&&C(Mn(r),i,e)&&(r.ab(i,e,n,h,s,o),o.length>=n))break}for(;o.length>n;)o.pop().i();return o},t.k.wc=function(t,i,n,h,s,e){if(pc.markPhysics3dModuleAsUsed(),0===(t=this.wb(t,i,n,h,Number.MAX_SAFE_INTEGER,s,e)).length)return null;for(i=t[0],n=1;n<t.length;n++)(h=t[n]).g<i.g?(i.i(),i=h):h.i();return i},t.k.wb=function(t,i,n,e,o,a,r){pc.markPhysics3dModuleAsUsed(),rr.set(i.x,i.y,i.z,i.w),lr.set(n.x,n.y,n.z),ur.set(e.x,e.y,e.z),h(gr,ur,lr),e=lr;var l=rr;for(n=gr,fr||(fr=new jn(-1,1)),(i=fr).sa(e),i.ya(l),wn(i.h),i.h.va(t,eh,uh),i.l.u(n),i.K=Dr,i.ea(),t=Fn(i).buffer[0],cr.u(Mn(i)),cr.Ua(n),n=n.length(),e=Bt(this.g,cr,a),a=[],l=0;l<e.length;l++)for(var g=Fn(e[l]),f=0;f<g.length;f++){var c=g.buffer[f];!r&&c.h.M||a.push(c)}for(e=[],g=1,dr.u(i.D);1e-5<g&&e.length<o&&0<a.length&&(l=kt(i,a,g,!0),Kn(t),null!==l);)if(f=a.indexOf(l),a[f]=a[a.length-1],a.pop(),pr.clear(),f=l.h.M,l.h.M=!1,this.h.i(t,l,pr),l.h.M=f,0===pr.length);else{for(f=Yn(pr.buffer[0]),c=0;c<pr.length;c++)pr.buffer[c].G();f.m&&!r?f.G():(f.D!==i&&Wn(f),g=th(cl.la),s(g.A,f.i,-1),g.C.u(f.j),g.h=l.l,g.j=f.I,g.g=u(dr,i.D),e.push(g),f.G(),g=1-g.g/n)}return e},t.k.Zb=function(t,i,n,h,s){pc.markPhysics3dModuleAsUsed(),hr.set(i.x,i.y,i.z),sr.set(n.x,n.y,n.z,n.w),n=hr;var e=sr;for(er||(er=new jn(-1,1)),ar.clear(),(i=er).sa(n),i.ya(e),wn(i.h),i.h.va(t,eh,uh),i.ea(),t=Bt(this.g,Mn(i),h),h=[],n=0;n<t.length;n++){or.clear(),e=Fn(i);for(var o=Fn(t[n]),a=0;a<e.length;a++){const t=e.buffer[a];for(let i=0;i<o.length;i++)this.h.i(t,o.buffer[i],or)}if(0!==or.length)for(e=0;e<or.length;e++)a=(o=or.buffer[e]).D===i?o.I:o.K,ar.has(a.h)||o.m&&!s||(h.push(a),ar.add(a.h)),o.G()}return h},t.k.Yb=function(t,i,n,h,s,e,o,a){pc.markPhysics3dModuleAsUsed(),mr.set(n.x,n.y,n.z),wr.set(i.x,i.y,i.z),xr.set(h.x,h.y,h.z,h.w),br.set(o.x,o.y,o.z),zr.set(e.x,e.y,e.z),vr.set(a.x,a.y,a.z,a.w),h=wr,e=mr,o=xr,a=zr;var r=br,l=vr;if(jr||(jr=new jn(-1,1)),Mr||(Mr=new jn(-1,1)),kr.clear(),i=Mr,(n=jr).sa(e),n.ya(o),i.sa(r),i.ya(l),wn(n.h),n.h.va(t,h,uh),n.ea(),wn(i.h),i.h.va(s,a,uh),i.ea(),k(Mn(n),Mn(i)))if(h=t.M,e=s.M,t.M=!1,s.M=!1,Qi(this.h,n,i,kr),t.M=h,s.M=e,0===kr.length)t=null;else{for(t=1;t<kr.length;t++)kr.buffer[t].G();(t=kr.buffer[0]).D===i&&Wn(t)}else t=null;return t},t.k.cc=function(){for(let t=0;t<this.j.length;t++)this.j[t].h.Ca()},t.k.sc=function(t,i,n){pc.markPhysics3dModuleAsUsed();const h=Math.min(t.h,i.h);t=Math.max(t.h,i.h),n?this.m.add(h+(t<<16)):0!==this.m.size&&this.m.delete(h+(t<<16))};var ir=new i,nr=new i,hr=new i,sr=new c,er=null,or=new ds,ar=new Set,rr=new c,lr=new i,ur=new i,gr=new i,fr=null,cr=new v,pr=new ds,dr=new i,yr=new i,mr=new i,wr=new i,xr=new c,br=new i,zr=new i,vr=new c,jr=null,Mr=null,kr=new ds;mn.prototype=Object.create(P.prototype),t.k=mn.prototype,t.k.va=function(t,i,n){const h=xn(this,t.h);h?(h.g.D=!1,h.g=t,h.j.u(i),h.i.u(n),h.i.normalize(),R(h)):this.g.push(new T(t,i,n)),t.D=!0,this.Ca(),this.Ya(),zn(this)},t.k.yc=function(t,i,n){if(!(t=xn(this,t)))throw Error("Cannot find shape");t.j.u(i),t.i.u(n),t.i.normalize(),R(t),zn(this)},t.k.hc=function(t){const i=this.g;for(let n=0;n<i.length;n++){const h=i[n];if(h.g.h===t){h.g.D=!1,i[n]=i[i.length-1],i.pop();break}}this.Ca(),this.Ya(),zn(this)},t.k.Ca=function(){const t=tr.o;this.j=0,this.o=4294967295;for(let i=0;i<this.g.length;i++){const n=this.g[i].g;this.j|=1<<n.Y,this.o&=t[n.Y]}},t.k.Ya=function(){this.M=!1;for(let t=0;t<this.g.length;t++)if(this.g[t].g.M){this.M=!0;break}};var Ar=new G,Cr=new i,Ir=new i,Pr=new i,Or=new i,Nr=new i;Object.defineProperty(jn.prototype,"mass",{get(){return this.G},set(t){1e-5>Math.abs(this.G-t)||(this.G=t,this.aa=1/t,this.ea())}}),Object.defineProperty(jn.prototype,"isDynamic",{get(){return!!(1&this.g)}}),Object.defineProperty(jn.prototype,"isKinematic",{get(){return!!(2&this.g)},set(t){t===!!(2&this.g)||t&&4&this.g||(t?(this.g|=2,this.g&=-2,Sn(this)):(this.g&=-3,4&this.g||(this.g|=1)),this.ea())}}),Object.defineProperty(jn.prototype,"isStatic",{get(){return!!(4&this.g)},set(t){t!==!!(4&this.g)&&(t?(this.g|=4,this.g&=-2,this.g&=-3,Sn(this)):(this.g&=-5,2&this.g||(this.g|=1)),this.ea())}}),Object.defineProperty(jn.prototype,"useGravity",{get(){return!!(16&this.g)},set(t){t!==!!(16&this.g)&&(this.g=t?16|this.g:-17&this.g,this.O(!0))}}),Object.defineProperty(jn.prototype,"disableCollisions",{get(){return!!(8&this.g)},set(t){t!==!!(8&this.g)&&(this.g=t?8|this.g:-9&this.g,this.O(!0))}}),Object.defineProperty(jn.prototype,"isSleeping",{get(){return!!(512&this.g)},set(t){this.g=t?512|this.g:-513&this.g}}),Object.defineProperty(jn.prototype,"positionLockX",{get(){return!!(1&this.i)},set(t){t!==!!(1&this.i)&&(this.i=t?1|this.i:-2&this.i,Dn(this),Bn(this),this.O(!0))}}),Object.defineProperty(jn.prototype,"positionLockY",{get(){return!!(2&this.i)},set(t){t!==!!(2&this.i)&&(this.i=t?2|this.i:-3&this.i,Dn(this),Bn(this),this.O(!0))}}),Object.defineProperty(jn.prototype,"positionLockZ",{get(){return!!(4&this.i)},set(t){t!==!!(4&this.i)&&(this.i=t?4|this.i:-5&this.i,Dn(this),Bn(this),this.O(!0))}}),Object.defineProperty(jn.prototype,"rotationLockX",{get(){return!!(1&this.m)},set(t){t!==!!(1&this.m)&&(this.m=t?1|this.m:-2&this.m,Dn(this),Bn(this),this.O(!0))}}),Object.defineProperty(jn.prototype,"rotationLockY",{get(){return!!(2&this.m)},set(t){t!==!!(2&this.m)&&(this.m=t?2|this.m:-3&this.m,Dn(this),Bn(this),this.O(!0))}}),Object.defineProperty(jn.prototype,"rotationLockZ",{get(){return!!(4&this.m)},set(t){t!==!!(4&this.m)&&(this.m=t?4|this.m:-5&this.m,Dn(this),Bn(this),this.O(!0))}}),Object.defineProperty(jn.prototype,"_body",{set(){}}),Object.defineProperty(jn.prototype,"_entity",{set(){}}),t.k=jn.prototype,t.k.ra=function(){return bn(this.h)},t.k.da=function(){if(!(1024&this.g))return this.R;if(1&this.g&&1/0!==this.G){var t=Wr,i=An(this);t.data[0]=i.g,t.data[1]=i.j,t.data[2]=i.o,t.data[3]=i.h,t.data[4]=i.l,t.data[5]=i.v,t.data[6]=i.i,t.data[7]=i.m,t.data[8]=i.B,S(Wr,Xr),i=(t=Xr).multiply;var n=this.h;2&n.h&&vn(n),i.call(t,n.i.g),L(this.R,Xr,Wr);{i=(t=this.R).data[0],n=t.data[3];const s=t.data[6],e=t.data[1],o=t.data[4],a=t.data[7],r=t.data[2],l=t.data[5],u=t.data[8],g=u*o-a*l,f=-u*e+a*r,c=l*e-o*r;var h=i*g+n*f+s*c;h&&(h=1/h,t.data[0]=g*h,t.data[1]=f*h,t.data[2]=c*h,t.data[3]=(-u*n+s*l)*h,t.data[4]=(u*i-s*r)*h,t.data[5]=(-l*i+n*r)*h,t.data[6]=(a*n-s*o)*h,t.data[7]=(-a*i+s*e)*h,t.data[8]=(o*i-n*e)*h)}}else(t=this.R).data[0]=1,t.data[1]=0,t.data[2]=0,t.data[3]=0,t.data[4]=1,t.data[5]=0,t.data[6]=0,t.data[7]=0,t.data[8]=1;return this.g&=-1025,this.R},t.k.Db=function(){var t=this.h;return 2&t.h&&vn(t),(t=t.i).l||_(t),t.l},t.k.Eb=function(){var t=this.h;return 2&t.h&&vn(t),(t=t.i).j||_(t),t.j},t.k.$b=function(){return this.D},t.k.sa=function(t){g(this.D,t,Number.EPSILON)||(this.D.u(t),Gn(this))},t.k.Z=function(){return 2048&this.g?(this.o.F(this.ra(),Fr),this.I.u(this.D),this.I.add(Fr),this.g&=-2049,this.I):this.I},t.k.Fb=function(){return this.o},t.k.ya=function(t){d(t,this.o,Number.EPSILON)||(this.o.u(t),this.o.normalize(),Gn(this))},t.k.Hb=function(t,i){g(this.D,t,Number.EPSILON)&&d(this.o,i,Number.EPSILON)||(this.D.u(t),this.o.u(i),this.o.normalize(),Gn(this))},t.k.Gb=function(t,i){i.x=this.o.x,i.y=this.o.y,i.z=this.o.z,i.w=this.o.w,t.x=this.D.x,t.y=this.D.y,t.z=this.D.z},t.k.dc=function(t){var i=this.h;i.h|=4,i.h|=2,i.m.u(t),Gn(this)},t.k.jc=function(){var t=this.h;t.h&=-5,t.h|=2,Gn(this)},t.k.ab=function(t,i,h,s,e,o){An(this).F(t,Jr),An(this).F(i,_r),t=this.h,h-=o.length;var a=Jr,r=_r;for(i=bn(t),n(Ir,a,i),n(Pr,r,i),a=[],r=0;r<t.g.length;r++){const n=t.g[r];if(0!=(s&1<<n.g.Y)&&(!n.g.M||e)){n.l.F(Ir,Or),n.l.F(Pr,Nr);var l=n.g;if(C(l.l,Or,Nr)&&(null!==(l=l.Ba(Or,Nr))&&(l.j=n.g,w(n.transform,l.C),l.C.U(i),a.push(l)),a.length>=h))break}}for(s=0;s<a.length;s++)(e=a[s]).h=this,w(kn(this),e.C),kn(this).V(e.A),o.push(e)},t.k.Nb=function(t){this.l.x+=t.x,this.l.y+=t.y,this.l.z+=t.z,Dn(this),this.g|=16384,this.O(!0)},t.k.Mb=function(t){this.B.x+=t.x,this.B.y+=t.y,this.B.z+=t.z,this.g|=16384,this.O(!0)},t.k.Kb=function(t){this.v.x+=t.x,this.v.y+=t.y,this.v.z+=t.z,this.g|=16384,this.O(!0)},t.k.lc=function(t){this.j.u(t),Bn(this),this.O(!0)},t.k.Lb=function(t){this.j.x+=t.x,this.j.y+=t.y,this.j.z+=t.z,this.g|=16384,this.O(!0)},t.k.tc=function(t){this.l.u(t),Dn(this),this.O(!0)},t.k.Pb=function(t,i){Vr.u(i),Vr.U(this.Z()),a(Vr,t),this.B.add(t),this.v.add(Vr),this.g|=16384,this.O(!0)},t.k.Ra=function(t,i){kn(this).F(t,i),this.ob(i,i)},t.k.ob=function(t,i){h(qr,t,this.Z()),r(i,this.j,qr),i.add(this.l)},t.k.Wb=function(t,i,n){t=xn(this.h,t.h);const h=th(cl.ta);Un(h,this,t),As.J(i),at(h,As,n,Cs)||n.u(i),Vn(h)},t.k.Xb=function(t,i,n){t=xn(this.h,t.h);const h=th(cl.ta);Un(h,this,t),I(h.m,i,n),Vn(h)},t.k.Vb=function(t,i){if(0===this.h.g.length)i.u(this.D);else{var n=1/0,h=th(cl.ta);for(let s=0;s<this.h.g.length;s++){Un(h,this,this.h.g[s]),I(h.m,t,tl);const e=l(tl,t);if(1e-5>e)return void i.u(t);e<n&&(n=e,i.u(tl))}Vn(h)}},t.k.O=function(t=!1){this.g&=-513,t&&(this.W=.1)},t.k.ea=function(){this.g|=2048,this.g|=1024,this.g|=4096,this.g|=8192,this.g|=16384,this.g|=32768,zn(this.h),this.O()};var Br=0,Dr=1,Sr={Bc:Br,zc:Dr,Ac:2},Lr=class{constructor(t){this.body=t,this.g=new ds}},Er=new y,Fr=new i,Gr=new i,Hr=new i,Jr=new i,_r=new i,Ur=new i,Kr=new i,Tr=new i,Rr=new c,Vr=new i,qr=new i,Wr=new N,Xr=new N,Yr=new i,Zr=new i,$r=new c,Qr=new y,tl=new i,il=class{constructor(t){this.g=t,this.h=null,this.j=[],this.i=!1,this.l=[]}};_n.prototype.T=function(t,i){x(this.i,t,hl),this.h.T(hl,i),w(this.transform,i)};var nl=new i,hl=new i,sl=1,el=2,ol=4;qn.prototype.G=function(){null!==this.L&&(this.L.na(),pl(cl.Da,this.L),this.L=null),null!==this.R&&(this.R.na(),pl(cl.Fa,this.R),this.R=null),this.H=this.D=this.v=this.o=null,this.W=this.aa=0,this.m=!1,this.B=0,this.ha.set(0,0,0),this.N=0,this.S.clear(),this["__UnityEngine.Collision"]=null,this["__UnityEngine.ContactPoint"]=null,pl(cl.P,this)};var al=new Float64Array(65536),rl=0,ll=[],ul=[],gl=[],fl=[],cl={Ib:0,P:1,Ea:2,Da:3,Fa:4,la:5,ta:6,ma:7,ca:8,za:9,La:10,Ka:11,Ma:12,Ga:13},pl=Zn;Qn(cl.Ib,(()=>new i)),Qn(cl.P,(()=>new qn)),Qn(cl.Ea,(()=>new Dt)),Qn(cl.Da,(()=>new an)),Qn(cl.Fa,(()=>new rn)),Qn(cl.la,(()=>new nt)),Qn(cl.ta,(()=>new _n)),Qn(cl.ma,(()=>new mi)),Qn(cl.ca,(()=>new wi)),Qn(cl.za,(()=>new bi)),Qn(cl.La,(()=>new vi)),Qn(cl.Ka,(()=>new ji)),Qn(cl.Ma,(()=>new Mi)),Qn(cl.Ga,(()=>new Ot));var dl={EPSILON:1e-5,RigidBody:jn,ConvexHullShape:Tt,SphereShape:Hi,CapsuleShape:Gi,MeshShape:xt,AABB:v,Vector3:i,PhysicMaterial:O,Constraint:hn,ConstraintRow:tn,World:pn,RayIntersection:nt,ContactDetails:qn,Quaternion:c,Matrix4:y};"undefined"!=typeof window&&(window.Goblin=dl),nh(i.prototype,{x:"x",y:"y",z:"z"}),hh(i.prototype,i.prototype.set,"set"),hh(i.prototype,i.prototype.normalize,"normalize"),hh(i.prototype,i.prototype.u,"copy"),hh(i.prototype,i.prototype.s,"dot"),nh(c.prototype,{x:"x",y:"y",z:"z",w:"w"}),hh(c.prototype,c.prototype.set,"set"),hh(c.prototype,c.prototype.g,"transformVector3"),hh(y.prototype,y.prototype.V,"rotateVector3"),hh(y.prototype,y.prototype.ua,"makeTransform"),hh(N.prototype,N.prototype.F,"transformVector3Into"),nh(v.prototype,{min:"min",max:"max"}),hh(v.prototype,v.prototype.transform,"transform"),hh(pn,(function(){if(tr)throw Error("It is a really bad idea to initialize two worlds in the same time");return tr=new pn}),"initialize"),nh(pn.prototype,{D:"gravity",v:"bounceThreshold",i:"solver",B:"eventEmitter",o:"collision_matrix"}),hh(pn.prototype,pn.prototype.Ob,"addRigidBody"),hh(pn.prototype,pn.prototype.ic,"removeRigidBody"),hh(pn.prototype,pn.prototype.Ab,"addConstraint"),hh(pn.prototype,pn.prototype.Bb,"removeConstraint"),hh(pn.prototype,pn.prototype.Cb,"step"),hh(pn.prototype,pn.prototype.Tb,"emitEvents"),hh(pn.prototype,pn.prototype.cc,"onCollisionMatrixUpdated"),hh(pn.prototype,pn.prototype.xc,"testRayIntersectPc"),hh(pn.prototype,pn.prototype.fc,"rayIntersectPc"),hh(pn.prototype,pn.prototype.Wa,"rayIntersectAllPc"),hh(pn.prototype,pn.prototype.wc,"shapeCastPc"),hh(pn.prototype,pn.prototype.wb,"shapeCastAllPc"),hh(pn.prototype,pn.prototype.Zb,"getIntersectingShapesPc"),hh(pn.prototype,pn.prototype.Yb,"getContactPc"),hh(pn.prototype,pn.prototype.sc,"setIgnoreCollision"),nh(ln.prototype,{j:"max_iterations"}),hh(jn,Sr,"CollisionDetectionMode"),nh(jn.prototype,{h:"shape",j:"angular_velocity",S:"maxAngularVelocity",l:"linear_velocity",eb:"linear_damping",cb:"angular_damping",K:"collisionDetectionMode"}),hh(jn.prototype,jn.prototype.Gb,"getTransform"),hh(jn.prototype,jn.prototype.Hb,"setTransform"),hh(jn.prototype,jn.prototype.$b,"getPosition"),hh(jn.prototype,jn.prototype.Z,"getCOMAdjustedPosition"),hh(jn.prototype,jn.prototype.sa,"setPosition"),hh(jn.prototype,jn.prototype.Fb,"getRotation"),hh(jn.prototype,jn.prototype.ya,"setRotation"),hh(jn.prototype,jn.prototype.ea,"onShapeUpdated"),hh(jn.prototype,jn.prototype.Mb,"addLinearImpulse"),hh(jn.prototype,jn.prototype.Nb,"addLinearVelocity"),hh(jn.prototype,jn.prototype.Kb,"addAngularImpulse"),hh(jn.prototype,jn.prototype.Lb,"addAngularVelocity"),hh(jn.prototype,jn.prototype.lc,"setAngularVelocity"),hh(jn.prototype,jn.prototype.tc,"setLinearVelocity"),hh(jn.prototype,jn.prototype.Pb,"applyImpulseAtWorldPoint"),hh(jn.prototype,jn.prototype.Ra,"getVelocityInLocalPoint"),hh(jn.prototype,jn.prototype.ob,"getVelocityInGlobalPoint"),hh(jn.prototype,jn.prototype.ab,"rayIntersect"),hh(jn.prototype,jn.prototype.Wb,"getClosestPointOnShape"),hh(jn.prototype,jn.prototype.Xb,"getClosestPointOnShapeBounds"),hh(jn.prototype,jn.prototype.Vb,"getClosestPointOnBounds"),hh(jn.prototype,jn.prototype.O,"wakeUp"),hh(jn.prototype,jn.prototype.da,"getInverseInertiaTensorWorldFrame"),hh(jn.prototype,jn.prototype.Db,"getDiagonalizedInertiaTensor"),hh(jn.prototype,jn.prototype.Eb,"getDiagonalizedInertiaTensorRotation"),hh(jn.prototype,jn.prototype.ra,"getCenterOfMass"),hh(jn.prototype,jn.prototype.dc,"overrideCenterOfMass"),hh(jn.prototype,jn.prototype.jc,"resetCenterOfMass"),hh(Sr,Br,"Discrete"),hh(Sr,Dr,"ContinuousConservativeAdvancement"),hh(Sr,2,"ContinuousSpeculative"),nh(P.prototype,{M:"isTrigger",l:"aabb"}),nh(K.prototype,{h:"uid",g:"material",Y:"layer"}),nh(mn.prototype,{g:"child_shapes"}),hh(mn.prototype,mn.prototype.Ca,"updateLayersMasks"),hh(mn.prototype,mn.prototype.Ya,"updateIsTriggerFlag"),hh(mn.prototype,mn.prototype.va,"addChildShape"),hh(mn.prototype,mn.prototype.yc,"updateShapeTransform"),hh(mn.prototype,mn.prototype.hc,"removeChildShape"),nh(T.prototype,{g:"shape",h:"aabb"}),hh(Tt,(function(t,n,h,s,e,o){return n=Math.max(n,1e-4),h=Math.max(h,1e-4),s=Math.max(s,1e-4),new Tt(t,[new i(n,h,s),new i(n,h,-s),new i(-n,h,-s),new i(-n,h,s),new i(n,-h,s),new i(n,-h,-s),new i(-n,-h,-s),new i(-n,-h,s)],e,!0,o)}),"fromAABB"),hh(Tt,(function(t){Qt(re,t);let n=re.max.x-re.min.x,h=re.max.y-re.min.y,s=re.max.z-re.min.z;if(!(1e-6<n&&1e-6<h&&1e-6<s&&3<t.length)){var e=1/0;1e-6<n&&n<e&&(e=n),1e-6<h&&h<e&&(e=h),1e-6<s&&s<e&&(e=s),1/0===e?s=h=n=.01:(n=1e-6>n?.05*e:n/2,h=1e-6>h?.05*e:h/2,s=1e-6>s?.05*e:s/2),e=(re.min.x+re.max.x)/2;var o=(re.min.y+re.max.y)/2,a=(re.min.z+re.max.z)/2;t.length=0,t.push(new i(n+e,h+o,s+a),new i(n+e,h+o,-s+a),new i(-n+e,h+o,-s+a),new i(-n+e,h+o,s+a),new i(n+e,-h+o,s+a),new i(n+e,-h+o,-s+a),new i(-n+e,-h+o,-s+a),new i(-n+e,-h+o,s+a))}}),"approximateByAABBIfNecessary"),hh(Tt.prototype,Tt.prototype.zb,"getShallowCopy"),hh(xt.prototype,xt.prototype.v,"getShallowCopy"),nh(nt.prototype,{h:"object",j:"shape",C:"point",A:"normal",g:"distance",l:"triangleIndex",ia:"barycentricCoordinates"}),hh(nt.prototype,nt.prototype.i,"dispose"),nh(O.prototype,{name:"name",h:"bounciness",i:"dynamicFriction",l:"staticFriction",j:"frictionCombine",g:"bounceCombine"}),nh(hn.prototype,{g:"object_a",h:"object_b",i:"rows",o:"objectAIsDynamic",v:"objectBIsDynamic",D:"disablesCollisionBetweenObjects",I:"breakForce",N:"breakTorque",l:"massScaleA",m:"massScaleB"}),hh(hn.prototype,hn.prototype.Oa,"activate"),hh(hn.prototype,hn.prototype.na,"deactivate"),hh(hn.prototype,hn.prototype.oc,"setBodyA"),hh(hn.prototype,hn.prototype.pc,"setBodyB"),hh(hn.prototype,hn.prototype.rc,"setDisableCollisionFlag"),hh(tn.prototype,tn.prototype.Za,"reset"),hh(tn.prototype,tn.prototype.ac,"markAsPositional"),hh(tn.prototype,tn.prototype.oa,"setJacobianA"),hh(tn.prototype,tn.prototype.pa,"setJacobianB"),hh(tn.prototype,tn.prototype.Ub,"getBias"),hh(tn.prototype,tn.prototype.mc,"setBias"),hh(tn.prototype,tn.prototype.qc,"setCFM"),hh(tn.prototype,tn.prototype.uc,"setLowerLimit"),hh(tn.prototype,tn.prototype.vc,"setUpperLimit"),hh(tn.prototype,tn.prototype.kc,"resetJacobianA"),hh(tn.prototype,tn.prototype.vb,"resetJacobianB"),hh(tn.prototype,tn.prototype.ec,"preventWarmStart"),nh(qn.prototype,{D:"bodyA",H:"bodyB",K:"shape_a",I:"shape_b",j:"contact_point",i:"contact_normal",l:"penetration_depth",ha:"relativeVelocity",N:"impulse"}),hh(qn.prototype,qn.prototype.G,"dispose"),nh(cn.prototype,{h:"_onCollisionContactEnter",j:"_onCollisionContactStay",i:"_onCollisionContactExit",l:"_onTriggerContactEnter",o:"_onTriggerContactStay",m:"_onTriggerContactExit"}),sh(Nt.prototype.l),sh(Nt.prototype.m),sh($i.prototype.j),sh($i.prototype.i),sh(cn.prototype.g),sh(ln.prototype.ub),sh(ln.prototype.sb),sh(ln.prototype.Qa),sh(ln.prototype.tb),sh(ln.prototype.xb),sh(ln.prototype.yb),sh(ln.prototype.$a),sh(hn.prototype.S),sh(tn.prototype.kb),sh(tn.prototype.lb),sh(tn.prototype.mb),sh(tn.prototype.rb),sh(tn.prototype.nb),sh(At),sh(Tt.prototype.fb),sh(Tt.prototype.ib),sh(Tt.prototype.hb),sh(Tt.prototype.gb),sh(Ti)}.call(this||window,window.__wpcc=window.__wpcc||{});